{"version":3,"sources":["webpack:///static/js/16.d662e5f34dc627c11b9d.js","webpack:///./src/components/publish/index.vue","webpack:///index.vue?41b5","webpack:///./src/components/publish/index.vue?99ce","webpack:///./src/components/publish/index.vue?98e4","webpack:///./src/components/publish/index.vue?3922"],"names":["webpackJsonp","182","module","exports","__webpack_require__","injectStyle","ssrContext","Component","226","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","name","props","data","nproject","dialog","valid","rules","v","customer","loading","items","select","idMap","search","watch","val","_this","this","a","mark","_callee","re","index","wrap","_context","prev","next","abrupt","test","$store","dispatch","pageSize","currentPage","sent","push","_id","console","log","stop","computed","project","state","methods","projectDialogOpen","projectDialogClose","$refs","mproForm","reset","projectCreate","_this2","_callee2","publisherId","_context2","validate","indexOf","mounted","beforeCreate","237","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","259","content","locals","286","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","grid-list-lg","text-xs-center","row","align-center","xs12","justify-center","staticStyle","height","width","dark","margin","font-size","flat","on","click","$event","_v","persistent","max-width","model","callback","$$v","$set","expression","grid-list-md","ref","lazy-validation","label","color","keyup","_k","keyCode","key","directives","rawName","autocomplete","cache-items","search-input","update:searchInput","small","appLoading","staticRenderFns"],"mappings":"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","file":"static/js/16.d662e5f34dc627c11b9d.js","sourcesContent":["webpackJsonp([16],{\n\n/***/ 182:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(259)\n}\nvar Component = __webpack_require__(25)(\n  /* script */\n  __webpack_require__(226),\n  /* template */\n  __webpack_require__(286),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5df081c6\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 226:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__);\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'publish',\n    props: [],\n    data: function data() {\n        return {\n            nproject: {\n                dialog: false,\n                name: '',\n                valid: false,\n                rules: [function (v) {\n                    return !!v || '请填写任务名称';\n                }]\n            },\n\n            customer: {\n                loading: false,\n                items: [],\n                select: null,\n                idMap: []\n            },\n            search: null\n        };\n    },\n\n    watch: {\n        search: function search(val) {\n            var _this = this;\n\n            return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee() {\n                var re, items, index;\n                return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                if (val) {\n                                    _context.next = 2;\n                                    break;\n                                }\n\n                                return _context.abrupt('return');\n\n                            case 2:\n                                re = /[^\\u4e00-\\u9fa5]/;\n\n                                if (!re.test(val)) {\n                                    _context.next = 5;\n                                    break;\n                                }\n\n                                return _context.abrupt('return');\n\n                            case 5:\n                                _context.next = 7;\n                                return _this.$store.dispatch('getCustomers', { pageSize: 50, currentPage: 1, search: _this.search });\n\n                            case 7:\n                                items = _context.sent;\n\n                                _this.customer.items = [];\n                                _this.customer.idMap = [];\n                                for (index in items) {\n                                    _this.customer.items.push(items[index].name);\n                                    _this.customer.idMap.push(items[index]._id);\n                                }\n                                console.log(_this.customer.idMap);\n\n                            case 12:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, _this);\n            }))();\n        }\n    },\n    computed: {\n        project: function project() {\n            return this.$store.state.project;\n        }\n    },\n    methods: {\n\n        //打开创建任务模态框\n        projectDialogOpen: function projectDialogOpen() {\n            this.nproject.dialog = true;\n        },\n\n\n        //关闭创建任务模态框\n        projectDialogClose: function projectDialogClose() {\n            //清空form数据\n\n            this.nproject.dialog = false;\n            this.$refs.mproForm.reset();\n        },\n\n\n        //创建项目\n        projectCreate: function projectCreate(name, customer) {\n            var _this2 = this;\n\n            return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2() {\n                var publisherId;\n                return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                if (_this2.$refs.mproForm.validate()) {\n                                    _context2.next = 2;\n                                    break;\n                                }\n\n                                return _context2.abrupt('return');\n\n                            case 2:\n                                publisherId = _this2.customer.idMap[_this2.customer.items.indexOf(customer)];\n                                _context2.next = 5;\n                                return _this2.$store.dispatch('postProject', { name: name, publisherId: publisherId });\n\n                            case 5:\n                                //关闭模态框\n                                _this2.projectDialogClose();\n\n                            case 6:\n                            case 'end':\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, _this2);\n            }))();\n        }\n    },\n    mounted: function mounted() {},\n    beforeCreate: function beforeCreate() {}\n});\n\n/***/ }),\n\n/***/ 237:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(161)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".publish[data-v-5df081c6]{padding-top:50px;display:-webkit-box;display:-ms-flexbox;display:flex}.mycard[data-v-5df081c6]{height:500px}\", \"\", {\"version\":3,\"sources\":[\"E:/program/tujingwang1/program/src/components/publish/index.vue\"],\"names\":[],\"mappings\":\"AACA,0BACI,iBAAkB,AAClB,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,yBACI,YAAc,CACjB\",\"file\":\"index.vue\",\"sourcesContent\":[\"\\n.publish[data-v-5df081c6] {\\n    padding-top: 50px;\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n}\\n.mycard[data-v-5df081c6] {\\n    height: 500px;\\n}\\n\\n\\n\\n\\n\\n\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 259:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(237);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(162)(\"6e09a19d\", content, true, {});\n\n/***/ }),\n\n/***/ 286:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"publish\"\n  }, [_c('v-container', {\n    attrs: {\n      \"grid-list-lg\": \"\",\n      \"text-xs-center\": \"\"\n    }\n  }, [_c('v-layout', {\n    attrs: {\n      \"row\": \"\",\n      \"wrap\": \"\",\n      \"align-center\": \"\"\n    }\n  }, [_c('v-flex', {\n    attrs: {\n      \"xs12\": \"\"\n    }\n  }, [_c('v-layout', {\n    attrs: {\n      \"justify-center\": \"\"\n    }\n  }, [_c('v-card', {\n    staticStyle: {\n      \"height\": \"300px\",\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"dark\": \"\"\n    }\n  }, [_c('v-btn', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"font-size\": \"32px\"\n    },\n    attrs: {\n      \"flat\": \"\",\n      \"dark\": \"\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.projectDialogOpen()\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"material-icons\",\n    staticStyle: {\n      \"font-size\": \"40px\"\n    }\n  }, [_vm._v(\"event_note\")]), _vm._v(\"\\n                                创建项目\\n                            \")])], 1)], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('v-dialog', {\n    attrs: {\n      \"persistent\": \"\",\n      \"max-width\": \"500px\"\n    },\n    model: {\n      value: (_vm.nproject.dialog),\n      callback: function($$v) {\n        _vm.$set(_vm.nproject, \"dialog\", $$v)\n      },\n      expression: \"nproject.dialog\"\n    }\n  }, [_c('v-card', [_c('v-card-text', [_c('v-container', {\n    attrs: {\n      \"grid-list-md\": \"\"\n    }\n  }, [_c('v-layout', {\n    attrs: {\n      \"wrap\": \"\"\n    }\n  }, [_c('v-form', {\n    ref: \"mproForm\",\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"lazy-validation\": \"\"\n    },\n    model: {\n      value: (_vm.nproject.valid),\n      callback: function($$v) {\n        _vm.$set(_vm.nproject, \"valid\", $$v)\n      },\n      expression: \"nproject.valid\"\n    }\n  }, [_c('v-flex', {\n    attrs: {\n      \"xs12\": \"\"\n    }\n  }, [_c('v-text-field', {\n    attrs: {\n      \"label\": \"任务名称\",\n      \"rules\": _vm.nproject.rules,\n      \"color\": \"yellow darken-1\"\n    },\n    on: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")) { return null; }\n        _vm.projectCreate(_vm.nproject.name)\n      }\n    },\n    model: {\n      value: (_vm.nproject.name),\n      callback: function($$v) {\n        _vm.$set(_vm.nproject, \"name\", $$v)\n      },\n      expression: \"nproject.name\"\n    }\n  }), _vm._v(\" \"), _c('v-text-field', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (false),\n      expression: \"false\"\n    }],\n    attrs: {\n      \"label\": \"任务名称\"\n    }\n  })], 1), _vm._v(\" \"), _c('v-flex', {\n    attrs: {\n      \"xs12\": \"\"\n    }\n  }, [_c('v-select', {\n    attrs: {\n      \"label\": \"客户名\",\n      \"autocomplete\": \"\",\n      \"loading\": _vm.customer.loading,\n      \"cache-items\": \"\",\n      \"items\": _vm.customer.items,\n      \"rules\": [function (v) { return !!v || '请选择客户'; }],\n      \"search-input\": _vm.search\n    },\n    on: {\n      \"update:searchInput\": function($event) {\n        _vm.search = $event\n      }\n    },\n    model: {\n      value: (_vm.customer.select),\n      callback: function($$v) {\n        _vm.$set(_vm.customer, \"select\", $$v)\n      },\n      expression: \"customer.select\"\n    }\n  })], 1)], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('v-card-actions', [_c('v-spacer'), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"small\": \"\",\n      \"flat\": \"\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.projectDialogClose()\n      }\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"small\": \"\",\n      \"flat\": \"\",\n      \"loading\": this.$store.state.appLoading\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.projectCreate(_vm.nproject.name, _vm.customer.select)\n      }\n    }\n  }, [_vm._v(\"创建\")])], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/16.d662e5f34dc627c11b9d.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5df081c6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar Component = require(\"!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=script&index=0!./index.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5df081c6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=template&index=0!./index.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5df081c6\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/publish/index.vue\n// module id = 182\n// module chunks = 16","<template>\r\n    <div class=\"publish\">\r\n        <v-container grid-list-lg text-xs-center>\r\n            <v-layout row wrap align-center>\r\n                    <!-- <v-flex xs6>\r\n                        <v-layout justify-end>\r\n                            <v-card dark style=\" height: 300px; width: 300px;\">\r\n                                <v-btn flat dark style=\"width: 100%; height: 100%; margin: 0px; font-size: 32px;\">\r\n                                    <i class=\"material-icons\" style=\"font-size: 40px;\">photo</i>\r\n                                    作品\r\n                                </v-btn>\r\n                            </v-card>\r\n                        </v-layout>\r\n                    </v-flex>  -->\r\n\r\n                    <v-flex xs12>\r\n                        <v-layout justify-center>\r\n                            <v-card dark style=\" height: 300px; width: 300px;\">\r\n                                <v-btn flat dark style=\"width: 100%; height: 100%; margin: 0px; font-size: 32px;\" @click=\"projectDialogOpen()\">\r\n                                    <i class=\"material-icons\" style=\"font-size: 40px;\">event_note</i>\r\n                                    创建项目\r\n                                </v-btn>\r\n                            </v-card>\r\n                        </v-layout>\r\n                    </v-flex>\r\n \r\n            </v-layout>\r\n        </v-container>\r\n\r\n        <v-dialog v-model=\"nproject.dialog\" persistent max-width=\"500px\">\r\n            <v-card>\r\n                <v-card-text>\r\n                    <v-container grid-list-md>\r\n                        <v-layout wrap>\r\n\r\n                            <v-form v-model=\"nproject.valid\" ref=\"mproForm\" lazy-validation style=\"width: 100%;\">\r\n                                <v-flex xs12>\r\n                                        <v-text-field label=\"任务名称\" v-model=\"nproject.name\" :rules=\"nproject.rules\" color=\"yellow darken-1\" \r\n                                        @keyup.enter=\"projectCreate(nproject.name)\"></v-text-field>\r\n                                        <!-- 用来消除空格提交 -->\r\n                                        <v-text-field v-show=\"false\" label=\"任务名称\"></v-text-field>\r\n                    \r\n                                </v-flex>\r\n\r\n                                <!-- 选择发布者 -->\r\n                                <v-flex xs12>\r\n\r\n                                    <v-select\r\n                                        label=\"客户名\"\r\n                                        autocomplete\r\n                                        :loading=\"customer.loading\"\r\n                                        cache-items\r\n                                        :items=\"customer.items\"\r\n                                        :rules=\"[v => !!v || '请选择客户']\"\r\n                                        :search-input.sync=\"search\"\r\n                                        v-model=\"customer.select\"\r\n                                    ></v-select>\r\n\r\n                                </v-flex>\r\n\r\n\r\n                            </v-form>\r\n                        </v-layout>\r\n                    </v-container>\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn small flat @click=\"projectDialogClose()\">取消</v-btn>\r\n                    <v-btn small flat :loading=\"this.$store.state.appLoading\" @click=\"projectCreate(nproject.name, customer.select)\">创建</v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n         \r\n        </v-dialog>\r\n       \r\n        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'publish',\r\n    props: [],\r\n    data() {\r\n        return {\r\n            nproject: {\r\n                dialog: false,\r\n                name: '',\r\n                valid: false,\r\n                rules: [\r\n                    (v) => !!v || '请填写任务名称',\r\n                ]\r\n            },\r\n\r\n            customer: {\r\n                loading: false,\r\n                items: [],\r\n                select: null,\r\n                idMap: [],\r\n            },\r\n            search: null,\r\n        }\r\n    },\r\n    watch: {\r\n        async search (val) {\r\n\r\n            if (!val) return; \r\n\r\n            let re=/[^\\u4e00-\\u9fa5]/;  \r\n            if(re.test(val)) return;  \r\n\r\n            let items = await this.$store.dispatch('getCustomers', {pageSize: 50, currentPage: 1, search: this.search});\r\n            this.customer.items = [];\r\n            this.customer.idMap = [];\r\n            for ( let index in items) {\r\n                this.customer.items.push(items[index].name);\r\n                this.customer.idMap.push(items[index]._id);\r\n            }\r\n            console.log(this.customer.idMap);\r\n\r\n        }\r\n        \r\n    },\r\n    computed: {\r\n        project() {\r\n            return this.$store.state.project;\r\n        },\r\n\r\n    },\r\n    methods: {\r\n\r\n        //打开创建任务模态框\r\n        projectDialogOpen() {\r\n            this.nproject.dialog = true;\r\n        },\r\n        \r\n        //关闭创建任务模态框\r\n        projectDialogClose() {\r\n            //清空form数据\r\n\r\n            this.nproject.dialog = false;\r\n            this.$refs.mproForm.reset();\r\n        },\r\n\r\n        //创建项目\r\n        async projectCreate(name, customer) {\r\n            //验证表单数据\r\n            if(!this.$refs.mproForm.validate()) return;\r\n\r\n            let publisherId = this.customer.idMap[this.customer.items.indexOf(customer)]\r\n   \r\n            await this.$store.dispatch('postProject', {name, publisherId});\r\n            //关闭模态框\r\n            this.projectDialogClose();\r\n        }\r\n    },\r\n    mounted(){\r\n    },\r\n    beforeCreate() {\r\n\r\n    },\r\n\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n    .publish {\r\n        padding-top: 50px;\r\n        display: flex;\r\n    }\r\n\r\n    .mycard {\r\n        height: 500px;\r\n    }\r\n\r\n\r\n\r\n   \r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// index.vue?c2101204","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".publish[data-v-5df081c6]{padding-top:50px;display:-webkit-box;display:-ms-flexbox;display:flex}.mycard[data-v-5df081c6]{height:500px}\", \"\", {\"version\":3,\"sources\":[\"E:/program/tujingwang1/program/src/components/publish/index.vue\"],\"names\":[],\"mappings\":\"AACA,0BACI,iBAAkB,AAClB,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,yBACI,YAAc,CACjB\",\"file\":\"index.vue\",\"sourcesContent\":[\"\\n.publish[data-v-5df081c6] {\\n    padding-top: 50px;\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n}\\n.mycard[data-v-5df081c6] {\\n    height: 500px;\\n}\\n\\n\\n\\n\\n\\n\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.11@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5df081c6\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/components/publish/index.vue\n// module id = 237\n// module chunks = 16","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.11@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5df081c6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js\")(\"6e09a19d\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@3.1.2@vue-style-loader!./~/_css-loader@0.28.11@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5df081c6\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/components/publish/index.vue\n// module id = 259\n// module chunks = 16","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"publish\"\n  }, [_c('v-container', {\n    attrs: {\n      \"grid-list-lg\": \"\",\n      \"text-xs-center\": \"\"\n    }\n  }, [_c('v-layout', {\n    attrs: {\n      \"row\": \"\",\n      \"wrap\": \"\",\n      \"align-center\": \"\"\n    }\n  }, [_c('v-flex', {\n    attrs: {\n      \"xs12\": \"\"\n    }\n  }, [_c('v-layout', {\n    attrs: {\n      \"justify-center\": \"\"\n    }\n  }, [_c('v-card', {\n    staticStyle: {\n      \"height\": \"300px\",\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"dark\": \"\"\n    }\n  }, [_c('v-btn', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"font-size\": \"32px\"\n    },\n    attrs: {\n      \"flat\": \"\",\n      \"dark\": \"\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.projectDialogOpen()\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"material-icons\",\n    staticStyle: {\n      \"font-size\": \"40px\"\n    }\n  }, [_vm._v(\"event_note\")]), _vm._v(\"\\n                                创建项目\\n                            \")])], 1)], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('v-dialog', {\n    attrs: {\n      \"persistent\": \"\",\n      \"max-width\": \"500px\"\n    },\n    model: {\n      value: (_vm.nproject.dialog),\n      callback: function($$v) {\n        _vm.$set(_vm.nproject, \"dialog\", $$v)\n      },\n      expression: \"nproject.dialog\"\n    }\n  }, [_c('v-card', [_c('v-card-text', [_c('v-container', {\n    attrs: {\n      \"grid-list-md\": \"\"\n    }\n  }, [_c('v-layout', {\n    attrs: {\n      \"wrap\": \"\"\n    }\n  }, [_c('v-form', {\n    ref: \"mproForm\",\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"lazy-validation\": \"\"\n    },\n    model: {\n      value: (_vm.nproject.valid),\n      callback: function($$v) {\n        _vm.$set(_vm.nproject, \"valid\", $$v)\n      },\n      expression: \"nproject.valid\"\n    }\n  }, [_c('v-flex', {\n    attrs: {\n      \"xs12\": \"\"\n    }\n  }, [_c('v-text-field', {\n    attrs: {\n      \"label\": \"任务名称\",\n      \"rules\": _vm.nproject.rules,\n      \"color\": \"yellow darken-1\"\n    },\n    on: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")) { return null; }\n        _vm.projectCreate(_vm.nproject.name)\n      }\n    },\n    model: {\n      value: (_vm.nproject.name),\n      callback: function($$v) {\n        _vm.$set(_vm.nproject, \"name\", $$v)\n      },\n      expression: \"nproject.name\"\n    }\n  }), _vm._v(\" \"), _c('v-text-field', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (false),\n      expression: \"false\"\n    }],\n    attrs: {\n      \"label\": \"任务名称\"\n    }\n  })], 1), _vm._v(\" \"), _c('v-flex', {\n    attrs: {\n      \"xs12\": \"\"\n    }\n  }, [_c('v-select', {\n    attrs: {\n      \"label\": \"客户名\",\n      \"autocomplete\": \"\",\n      \"loading\": _vm.customer.loading,\n      \"cache-items\": \"\",\n      \"items\": _vm.customer.items,\n      \"rules\": [function (v) { return !!v || '请选择客户'; }],\n      \"search-input\": _vm.search\n    },\n    on: {\n      \"update:searchInput\": function($event) {\n        _vm.search = $event\n      }\n    },\n    model: {\n      value: (_vm.customer.select),\n      callback: function($$v) {\n        _vm.$set(_vm.customer, \"select\", $$v)\n      },\n      expression: \"customer.select\"\n    }\n  })], 1)], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('v-card-actions', [_c('v-spacer'), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"small\": \"\",\n      \"flat\": \"\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.projectDialogClose()\n      }\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"small\": \"\",\n      \"flat\": \"\",\n      \"loading\": this.$store.state.appLoading\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.projectCreate(_vm.nproject.name, _vm.customer.select)\n      }\n    }\n  }, [_vm._v(\"创建\")])], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-5df081c6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/publish/index.vue\n// module id = 286\n// module chunks = 16"],"sourceRoot":""}