webpackJsonp([1],{180:function(t,e,i){function a(t){i(265)}var n=i(25)(i(224),i(292),a,"data-v-995b2394",null);t.exports=n.exports},188:function(t,e,i){t.exports={default:i(190),__esModule:!0}},189:function(t,e,i){t.exports=i.p+"static/img/file.05a6c4d.png"},190:function(t,e,i){i(72),i(71),t.exports=i(191)},191:function(t,e,i){var a=i(6),n=i(70);t.exports=i(4).getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}},192:function(t,e,i){t.exports=i.p+"static/img/22.4539d19.png"},193:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(188),n=i.n(a),s=i(11),r=i.n(s),o=i(10),l=i.n(o);e.default={name:"fileEdir",components:{},props:["pid","fileList"],data:function(){return{fileIcon:i(189),value:0,uploadFileList:[]}},computed:{user:function(){return this.$store.state.user},ossFile:function(){return this.$store.state.ossFile.client},newFileList:function(){for(var t in this.fileList)if(this.fileList[t].name&&!this.fileList[t].src){var e=this.fileList[t].name.substring(this.fileList[t].name.lastIndexOf(".")+1);"jpeg"!==e&&"png"!==e&&"gif"!==e&&"bmp"!==e&&"jpg"!==e||(this.fileList[t].src=this.$store.state.ossFile.client.signatureUrl(this.fileList[t].object,{expires:600,process:"image/resize,w_185"}))}return this.fileList}},methods:{fileChange:function(){var t=this;return l()(r.a.mark(function e(){var i,a,s,o,c,p,d,f;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(e){var i={state:1,progress:0,src:"",file:e},a=!1,s=!0,o=!1,c=void 0;try{for(var p,d=n()(t.fileList);!(s=(p=d.next()).done);s=!0){var f=p.value;if(e.name===f.name){a=!0;break}}}catch(t){o=!0,c=t}finally{try{!s&&d.return&&d.return()}finally{if(o)throw c}}if(a)return"continue";if("image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"image/bmp"===e.type||"image/jpg"===e.type){var u=new FileReader;u.onloadend=function(){var e=l()(r.a.mark(function e(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.src=a.target.result;case 1:case"end":return t.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),u.readAsDataURL(e)}t.fileList.push(i),console.log(11),t.$store.dispatch("uploadprojectFile",{callbackUrl:"osscallback/refFileUpload",objectKey:"temporaryFile/project/"+t.pid+"/reference/"+i.file.name,buf:i,pid:t.pid}).then(function(e){for(var i in t.fileList)t.fileList[i].file&&t.fileList[i].file.name===e.data.name&&t.fileList.splice(i,1,e.data)}).catch(function(t){console.log(t),i.state=2})},a=!0,s=!1,o=void 0,e.prev=4,c=n()(t.$refs.file.files);case 6:if(a=(p=c.next()).done){e.next=14;break}if(d=p.value,"continue"!==(f=i(d))){e.next=11;break}return e.abrupt("continue",11);case 11:a=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),s=!0,o=e.t0;case 20:e.prev=20,e.prev=21,!a&&c.return&&c.return();case 23:if(e.prev=23,!s){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,t,[[4,16,20,28],[21,,23,27]])}))()},openFile:function(){this.$refs.file.click()},deleteRefFile:function(t){var e=this;return l()(r.a.mark(function i(){var a;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.$store.dispatch("deleteRefFile",{pid:e.pid,name:t});case 2:i.t0=r.a.keys(e.fileList);case 3:if((i.t1=i.t0()).done){i.next=10;break}if(a=i.t1.value,e.fileList[a].name===t){i.next=7;break}return i.abrupt("continue",3);case 7:e.fileList.splice(a,1),i.next=3;break;case 10:case"end":return i.stop()}},i,e)}))()},downRefFile:function(t,e){var i=this.$store.state.ossFile.client.signatureUrl(t);window.open(i,"_blank")}},mounted:function(){},beforeCreate:function(){}}},194:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(11),n=i.n(a),s=i(188),r=i.n(s),o=i(10),l=i.n(o);e.default={name:"payfile",components:{},props:["pid","image"],data:function(){return{fileIcon:i(189),noImage:i(192),picture:this.image.picture?this.$store.state.ossFile.client.signatureUrl(this.image.picture.object,{expires:600,process:"image/resize,w_132"}):null,isHover:!1,isHoverOne:!1,nowfile:{state:0,validate:!0},voucher:{},rules:{space:[function(t){return!!t||"请选择设计空间"}],area:[function(t){return!!t||"请选择空间区域"}],price:[function(t){return/^[0-9]+$/.test(t)||"价格必须为数字,且不能为空"}],style:[function(t){return!!t||"请选择设计风格"}],designType:[function(t){return!!t||"请选择设计类型"}],imageType:[function(t){return!!t||"请选择图片类型"}]}}},computed:{ossFile:function(){return this.$store.state.ossFile.client},user:function(){return this.$store.state.user}},methods:{enter:function(){this.isHover=!0},leave:function(){this.isHover=!1},enterOne:function(){this.isHoverOne=!0},leaveOne:function(){this.isHoverOne=!1},fileChange:function(){var t=this;return l()(n.a.mark(function e(){var i,a,s,o,c,p;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=!0,a=!1,s=void 0,e.prev=3,o=r()(t.$refs.payfile.files);case 5:if(i=(c=o.next()).done){e.next=12;break}if(p=c.value,"image/jpeg"!==p.type&&"image/png"!==p.type&&"image/gif"!==p.type&&"image/bmp"!==p.type&&"image/jpg"!==p.type){e.next=9;break}return e.delegateYield(n.a.mark(function e(){var i,a,s,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={state:1,progress:0,src:"",file:p,validate:!0},a=new FileReader,a.onloadend=function(){var e=l()(n.a.mark(function e(a){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.src=a.target.result;case 1:case"end":return t.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),a.readAsDataURL(p),t.nowfile=i,s=i.file.name,e.next=8,t.$store.dispatch("uploadprojectFile",{callbackUrl:"osscallback/picFileUpload",objectKey:"temporaryFile/project/"+t.pid+"/picture/"+Number(Math.random().toString().substr(3,6)+Date.now()).toString(36)+"."+s.substring(s.lastIndexOf(".")+1),buf:i,pid:t.pid,iid:t.image._id});case 8:r=e.sent,t.voucher=r.data,i.state=2,console.log(t.voucher);case 12:case"end":return e.stop()}},e,t)})(),"t0",9);case 9:i=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(3),a=!0,s=e.t1;case 18:e.prev=18,e.prev=19,!i&&o.return&&o.return();case 21:if(e.prev=21,!a){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,t,[[3,14,18,26],[19,,21,25]])}))()},openFile:function(){this.$refs.payfile.click()},close:function(){this.nowfile.state=0,this.nowfile.validate=!0,this.$refs.proPayForm.reset(),this.$refs.payfile.value="",this.$emit("close")},test:function(){console.log(1)},downRefFile:function(t,e){var i=this.$store.state.ossFile.client.signatureUrl(t);window.open(i,"_blank")}},mounted:function(){},beforeCreate:function(){}}},195:function(t,e,i){e=t.exports=i(161)(!0),e.push([t.i,".payfile[data-v-115a80ff]{display:-webkit-box;display:-ms-flexbox;display:flex}.lengthLimit[data-v-115a80ff]{white-space:nowrap;display:inline-block;overflow:hidden;width:142px;text-overflow:ellipsis}.big[data-v-115a80ff]{padding-top:8px;padding-left:8px}.my-btn[data-v-115a80ff]{margin:0 0 0 2px;min-width:0;height:20px}","",{version:3,sources:["E:/program/tujingwang1/program/src/components/file/upload.vue"],names:[],mappings:"AACA,0BACI,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,8BACI,mBAAoB,AACpB,qBAAsB,AACtB,gBAAiB,AACjB,YAAa,AACb,sBAAwB,CAC3B,AACD,sBACI,gBAAiB,AACjB,gBAAkB,CACrB,AACD,yBACI,iBAAiB,AAIjB,YAAe,AACf,WAAa,CAChB",file:"upload.vue",sourcesContent:["\n.payfile[data-v-115a80ff] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.lengthLimit[data-v-115a80ff] {\n    white-space: nowrap;\n    display: inline-block;\n    overflow: hidden;\n    width: 142px;\n    text-overflow: ellipsis;\n}\n.big[data-v-115a80ff] {\n    padding-top: 8px;\n    padding-left: 8px;\n}\n.my-btn[data-v-115a80ff] {\n    margin-left: 2px;\n    margin-right: 0px;\n    margin-top: 0px;\n    margin-bottom: 0px;\n    min-width: 0px;\n    height: 20px;\n}\n\n\n\n"],sourceRoot:""}])},196:function(t,e,i){e=t.exports=i(161)(!0),e.push([t.i,".fileEdir[data-v-3d4e7678]{display:-webkit-box;display:-ms-flexbox;display:flex}.lengthLimit[data-v-3d4e7678]{white-space:nowrap;display:inline-block;overflow:hidden;width:142px;text-overflow:ellipsis}.big[data-v-3d4e7678]{padding-top:8px;padding-left:8px}","",{version:3,sources:["E:/program/tujingwang1/program/src/components/file/index.vue"],names:[],mappings:"AACA,2BAUI,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CAQjB,AACD,8BACI,mBAAoB,AACpB,qBAAsB,AACtB,gBAAiB,AACjB,YAAa,AACb,sBAAwB,CAC3B,AACD,sBACI,gBAAiB,AACjB,gBAAkB,CACrB",file:"index.vue",sourcesContent:["\n.fileEdir[data-v-3d4e7678] {\n    /* width:100%;\n    height:50px;\n    padding: 10px;\n    padding-top: 70px;\n    overflow:auto;\n    position: absolute; */\n    /* margin: auto; */\n    /* padding-top: 50px;\n    min-width: 1080px; */\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    /* width: 1300px; */\n    /* background-color: #fff; */\n    /* background-position:center;  */\n    /* max-width: 1220px; */\n    /* min-width: 965px;\n    background-color: #fff;\n    z-index:1; */\n}\n.lengthLimit[data-v-3d4e7678] {\n    white-space: nowrap;\n    display: inline-block;\n    overflow: hidden;\n    width: 142px;\n    text-overflow: ellipsis;\n}\n.big[data-v-3d4e7678] {\n    padding-top: 8px;\n    padding-left: 8px;\n}\n\n\n\n"],sourceRoot:""}])},197:function(t,e,i){var a=i(195);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(162)("57b85202",a,!0,{})},198:function(t,e,i){var a=i(196);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(162)("2a249f26",a,!0,{})},201:function(t,e,i){function a(t){i(198)}var n=i(25)(i(193),i(204),a,"data-v-3d4e7678",null);t.exports=n.exports},202:function(t,e,i){function a(t){i(197)}var n=i(25)(i(194),i(203),a,"data-v-115a80ff",null);t.exports=n.exports},203:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"payfile"},[i("v-layout",{attrs:{wrap:""}},[i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"payfile",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"yFile"},on:{change:function(e){t.fileChange()}}}),t._v(" "),t.image.picture&&t.nowfile.state<1?i("v-flex",{attrs:{xs12:""}},[i("v-card",{on:{mouseenter:t.enter,mouseleave:t.leave}},[i("v-card-media",{staticStyle:{width:"131.5px"},attrs:{src:t.picture,height:"131.5px"}},[i("transition",{attrs:{name:"fade"}},[t.isHover?i("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[this.user.realInformation.name===t.image.renderName?i("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(e){t.openFile()}}},[i("span",{staticClass:" caption"},[t._v("更换")])]):t._e(),t._v(" "),i("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(e){t.downRefFile(t.image.picture.object,t.image.picture.name)}}},[i("span",{staticClass:" caption"},[t._v("下载")])])],1):t._e()])],1)],1)],1):1===t.nowfile.state?i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticStyle:{width:"100%"}},[i("v-card-media",{staticStyle:{width:"131.5px"},attrs:{src:t.nowfile.src,height:"131.5px"}},[i("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[i("v-progress-circular",{attrs:{size:100,width:15,rotate:270,value:100*t.nowfile.progress,color:"yellow"}},[t._v("\n                            "+t._s(100*t.nowfile.progress)+"%\n                        ")])],1)])],1)],1):2===t.nowfile.state?i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticStyle:{width:"100%"},on:{mouseenter:t.enterOne,mouseleave:t.leaveOne}},[i("v-card-media",{staticStyle:{width:"131.5px"},attrs:{src:t.nowfile.src,height:"131.5px"}},[i("transition",{attrs:{name:"fade"}},[t.isHoverOne?i("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[this.user.realInformation.name===t.image.renderName?i("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(e){t.openFile()}}},[i("span",{staticClass:" caption"},[t._v("更换")])]):t._e(),t._v(" "),i("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(e){t.downRefFile(t.voucher.object,t.voucher.name)}}},[i("span",{staticClass:" caption"},[t._v("下载")])])],1):t._e()])],1)],1)],1):i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticStyle:{width:"100%"},on:{mouseenter:t.enter,mouseleave:t.leave}},[i("v-card-media",{staticStyle:{width:"131.5px"},attrs:{src:t.noImage,height:"131.5px"},on:{mouseenter:t.enter,mouseleave:t.leave}},[i("transition",{attrs:{name:"fade"}},[t.isHover&&this.user.realInformation.name===t.image.renderName&&1===t.image.isFinish?i("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[i("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(e){t.openFile()}}},[i("span",{staticClass:" caption"},[t._v("上传")])])],1):t._e()])],1)],1)],1)],1)],1)},staticRenderFns:[]}},204:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fileEdir"},[i("v-layout",{attrs:{wrap:""}},[i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"xFile",multiple:""},on:{change:function(e){t.fileChange()}}}),t._v(" "),-1!==t.user.authority.indexOf("service")?i("v-flex",{attrs:{xs2:""}},[i("v-btn",{staticStyle:{height:"217px",width:"100%",padding:"0px",margin:"0px"},attrs:{depressed:""},on:{click:t.openFile}},[i("v-flex",{attrs:{xs12:""}},[i("div",{staticStyle:{margin:"8px",display:"flex","justify-content":"center","align-items":"center"}},[i("v-icon",{attrs:{color:"grey"}},[t._v("add")])],1),t._v(" "),i("div",{staticStyle:{margin:"8px",display:"flex","justify-content":"center","align-items":"center"}},[i("span",{staticClass:"grey--text caption"},[t._v("点击添加文件")])])])],1)],1):t._e(),t._v(" "),t._l(t.newFileList,function(e,a){return 2!==e.state?i("v-flex",{key:a,attrs:{xs2:""}},[e.state?i("v-card",[i("v-card-media",{attrs:{src:e.src?e.src:t.fileIcon,height:"185px"}},[i("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[i("v-progress-circular",{attrs:{size:100,width:15,rotate:270,value:100*e.progress,color:"yellow"}},[t._v("\n                            "+t._s(100*e.progress)+"%\n                        ")]),t._v(" "),i("br"),t._v(" "),i("span",{staticClass:"title white--text"},[t._v("\n                            "+t._s(e.file.name.substring(e.file.name.lastIndexOf(".")+1))+"\n                        ")])],1)]),t._v(" "),i("v-container",{staticStyle:{padding:"8px"},attrs:{"fill-height":"",fluid:""}},[i("v-layout",[i("v-flex",{staticStyle:{"padding-top":"8px","padding-bottom":"0px"},attrs:{xs10:"","align-end":"",flexbox:""}},[i("span",{staticClass:"lengthLimit"},[t._v(t._s(e.file.name))])]),t._v(" "),i("v-flex",{attrs:{xs2:""}},[i("v-layout",{attrs:{"justify-end":"","fill-height":""}})],1)],1)],1)],1):i("v-card",{attrs:{flat:""}},[i("v-card-media",{attrs:{src:e.src?e.src:t.fileIcon,height:"185px"}},[e.src?t._e():i("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[i("br"),t._v(" "),i("span",{staticClass:"title white--text"},[t._v("\n                            "+t._s(e.name.substring(e.name.lastIndexOf(".")+1))+"\n                        ")])])]),t._v(" "),i("v-container",{staticStyle:{padding:"8px"},attrs:{"fill-height":"",fluid:""}},[i("v-layout",[i("v-flex",{staticStyle:{"padding-top":"8px","padding-bottom":"0px"},attrs:{xs10:"","align-end":"",flexbox:""}},[i("span",{staticClass:"lengthLimit"},[t._v(t._s(e.name))])]),t._v(" "),i("v-menu",{attrs:{"offset-y":""}},[i("v-btn",{staticStyle:{margin:"0px","margin-right":"4px"},attrs:{slot:"activator",icon:"",small:"",light:"",dark:""},slot:"activator"},[i("v-icon",{attrs:{color:"grey darken-2"}},[t._v("more_vert")])],1),t._v(" "),i("v-list",[-1!==t.user.authority.indexOf("service")?i("v-list-tile",{on:{click:function(i){t.deleteRefFile(e.name)}}},[i("v-list-tile-title",{staticClass:"body-1"},[t._v("删除")])],1):t._e(),t._v(" "),i("v-list-tile",{on:{click:function(i){t.downRefFile(e.object,e.name)}}},[i("v-list-tile-title",{staticClass:"body-1"},[t._v("下载")])],1)],1)],1)],1)],1)],1)],1):t._e()})],2)],1)},staticRenderFns:[]}},219:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(188),n=i.n(a),s=i(11),r=i.n(s),o=i(10),l=i.n(o);e.default={name:"fileEdir",components:{},props:["pid","fileList"],data:function(){return{fileIcon:i(189),value:0,uploadFileList:[]}},computed:{user:function(){return this.$store.state.user},ossFile:function(){return this.$store.state.ossFile.client},newFileList:function(){for(var t in this.fileList)if(this.fileList[t].name&&!this.fileList[t].src){var e=this.fileList[t].name.substring(this.fileList[t].name.lastIndexOf(".")+1);"jpeg"!==e&&"png"!==e&&"gif"!==e&&"bmp"!==e&&"jpg"!==e||(this.fileList[t].src=this.$store.state.ossFile.client.signatureUrl(this.fileList[t].object,{expires:600,process:"image/resize,w_185"}))}return this.fileList}},methods:{fileChange:function(){var t=this;return l()(r.a.mark(function e(){var i,a,s,o,l,c,p,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(e){var i={state:1,progress:0,src:"",file:e},a=!1,s=!0,r=!1,o=void 0;try{for(var l,c=n()(t.fileList);!(s=(l=c.next()).done);s=!0){var p=l.value;if(e.name===p.name){a=!0;break}}}catch(t){r=!0,o=t}finally{try{!s&&c.return&&c.return()}finally{if(r)throw o}}if(a)return"continue";if("image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"image/bmp"===e.type||"image/jpg"===e.type){return"continue"}t.fileList.push(i),t.$store.dispatch("uploadprojectFile",{callbackUrl:"osscallback/proFileUpload",objectKey:"temporaryFile/project/"+t.pid+"/model/"+i.file.name,buf:i,pid:t.pid}).then(function(e){for(var i in t.fileList)t.fileList[i].file&&t.fileList[i].file.name===e.data.name&&t.fileList.splice(i,1,e.data)}).catch(function(t){i.state=2})},a=!0,s=!1,o=void 0,e.prev=4,l=n()(t.$refs.file.files);case 6:if(a=(c=l.next()).done){e.next=14;break}if(p=c.value,"continue"!==(d=i(p))){e.next=11;break}return e.abrupt("continue",11);case 11:a=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),s=!0,o=e.t0;case 20:e.prev=20,e.prev=21,!a&&l.return&&l.return();case 23:if(e.prev=23,!s){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,t,[[4,16,20,28],[21,,23,27]])}))()},openFile:function(){this.$refs.file.click()},deleteRefFile:function(t){var e=this;return l()(r.a.mark(function i(){var a,n;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.$store.dispatch("deleteModFile",{pid:e.pid,name:t});case 2:if(a=i.sent){i.next=5;break}return i.abrupt("return");case 5:i.t0=r.a.keys(e.fileList);case 6:if((i.t1=i.t0()).done){i.next=13;break}if(n=i.t1.value,e.fileList[n].name===t){i.next=10;break}return i.abrupt("continue",6);case 10:e.fileList.splice(n,1),i.next=6;break;case 13:case"end":return i.stop()}},i,e)}))()},downRefFile:function(t,e){var i=this.$store.state.ossFile.client.signatureUrl(t);window.open(i,"_blank")}},mounted:function(){},beforeCreate:function(){}}},224:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(11),n=i.n(a),s=i(10),r=i.n(s),o=i(201),l=i.n(o),c=i(202),p=i.n(c),d=i(274),f=i.n(d);e.default={name:"work",components:{file:l.a,modelfilm:f.a,upload:p.a},props:[],data:function(){return{loading:!1,noImage:i(192),fileIcon:i(189),projectName:this.$route.params.pid,modelDialog:{state:!1,action:"",iid:""},image:{state:0,style:"",designType:"",space:"",area:"",imageType:"",price:""},rules:{space:[function(t){return!!t||"请选择设计空间"}],area:[function(t){return!!t||"请选择空间区域"}],price:[function(t){return/^[0-9]+$/.test(t)||"价格必须为数字,且不能为空"}],style:[function(t){return!!t||"请选择设计风格"}],designType:[function(t){return!!t||"请选择设计类型"}],imageType:[function(t){return!!t||"请选择图片类型"}]},customer:{loading:!1,items:[],select:null,idMap:[]},search:null}},computed:{project:function(){return this.$store.state.project.changeData},projects:function(){return this.$store.state.project.listData},appLoading:function(){return this.$store.state.appLoading},voucher:function(){return this.$store.state.project.voucher},user:function(){return this.$store.state.user},workLength:function(){if(!this.project.image)return 0;var t=0;for(var e in this.project.image)this.project.image[e].renderName!==this.user.realInformation.name&&this.project.image[e].modelName!==this.user.realInformation.name||t++;return t}},methods:{modelDialogOpen:function(t,e){this.modelDialog.state=!0,this.modelDialog.action=t,this.modelDialog.iid=e},modelDialogClose:function(){this.modelDialog.state=!1,this.modelDialog.action="",this.modelDialog.iid=""},actionModel:function(t,e){this.modelDialog.action=t,console.log(this.modelDialog)},putProImgMod:function(){var t=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.modelDialog.action),e.next=3,t.$store.dispatch("putProImgMod",{pid:t.project._id,iid:t.modelDialog.iid,model:t.modelDialog.action});case 3:return e.next=5,t.$store.dispatch("getProImage",t.project._id);case 5:t.modelDialogClose();case 6:case"end":return e.stop()}},e,t)}))()},createTime1:function(t){if(!t)return"无";var e=(new Date,new Date(1e3*parseInt(t.substring(0,8),16)));return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()},createTime2:function(t){var e=new Date(t);return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()},quit:function(t){this.$store.commit("removeChangeDate"),this.$router.replace({name:"works"})},toProjects:function(){this.change("projects")},change:function(t){console.log(t),this.$router.replace({name:t})}},mounted:function(){var t=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getWriteAndReadProjectStsToken",{pid:t.$route.params.pid});case 2:return e.next=4,t.$store.dispatch("getProject",t.$route.params.pid);case 4:case"end":return e.stop()}},e,t)}))()},beforeCreate:function(){}}},243:function(t,e,i){e=t.exports=i(161)(!0),e.push([t.i,".work[data-v-995b2394]{min-width:1280px;background-color:#f0f0f0;position:absolute;width:100%;z-index:3}.container.fluid[data-v-995b2394]{max-width:1260px}.card[data-v-995b2394]{border-radius:4px}.action-card[data-v-995b2394]{border-style:solid;border-color:#ffc107}.my-btn[data-v-995b2394]{margin:0 0 0 2px;min-width:0;height:18px}.two-btn[data-v-995b2394]{margin-left:0;margin-right:8px;min-width:0}","",{version:3,sources:["E:/program/tujingwang1/program/src/components/publish/Work.vue"],names:[],mappings:"AACA,uBAEI,iBAAkB,AAClB,yBAAqC,AACrC,kBAAmB,AAAC,WAAY,AAAC,SAAU,CAC9C,AACD,kCACI,gBAAkB,CACrB,AACD,uBAEI,iBAAmB,CAEtB,AACD,8BACI,mBAAmB,AACnB,oBAAsB,CACzB,AAWD,yBACI,iBAAiB,AAIjB,YAAe,AACf,WAAa,CAChB,AACD,0BACI,cAAiB,AACjB,iBAAkB,AAClB,WAAe,CAClB",file:"Work.vue",sourcesContent:["\n.work[data-v-995b2394] {\n\n    min-width: 1280px;\n    background-color: rgb(240, 240, 240);\n    position: absolute; width: 100%; z-index:3;\n}\n.container.fluid[data-v-995b2394] {\n    max-width: 1260px;\n}\n.card[data-v-995b2394] {\n\n    border-radius: 4px;\n    /* box-shadow: 0 1px 5px rgba(0,0,0,0.2), 0 2px 2px rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12); */\n}\n.action-card[data-v-995b2394] {\n    border-style:solid;\n    border-color: #FFC107;\n}\n\n\n\n    /* .card__title {\n    padding: 2px 4px 2px 4px;\n}\n.card__actions {\n    border-style:solid; border-width: 1px 0px 0px 0px; border-color: #ddd;\n    padding: 2px 0px 2px 0px;\n} */\n.my-btn[data-v-995b2394] {\n    margin-left: 2px;\n    margin-right: 0px;\n    margin-top: 0px;\n    margin-bottom: 0px;\n    min-width: 0px;\n    height: 18px;\n}\n.two-btn[data-v-995b2394] {\n    margin-left: 0px;\n    margin-right: 8px;\n    min-width: 0px;\n}\n\n\n\n\n\n"],sourceRoot:""}])},246:function(t,e,i){e=t.exports=i(161)(!0),e.push([t.i,".model[data-v-ccbad8ca]{display:-webkit-box;display:-ms-flexbox;display:flex}.lengthLimit[data-v-ccbad8ca]{white-space:nowrap;display:inline-block;overflow:hidden;width:142px;text-overflow:ellipsis}.big[data-v-ccbad8ca]{padding-top:8px;padding-left:8px}","",{version:3,sources:["E:/program/tujingwang1/program/src/components/file/model.vue"],names:[],mappings:"AACA,wBACI,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,8BACI,mBAAoB,AACpB,qBAAsB,AACtB,gBAAiB,AACjB,YAAa,AACb,sBAAwB,CAC3B,AACD,sBACI,gBAAiB,AACjB,gBAAkB,CACrB",file:"model.vue",sourcesContent:["\n.model[data-v-ccbad8ca] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.lengthLimit[data-v-ccbad8ca] {\n    white-space: nowrap;\n    display: inline-block;\n    overflow: hidden;\n    width: 142px;\n    text-overflow: ellipsis;\n}\n.big[data-v-ccbad8ca] {\n    padding-top: 8px;\n    padding-left: 8px;\n}\n\n\n\n"],sourceRoot:""}])},265:function(t,e,i){var a=i(243);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(162)("29315a45",a,!0,{})},268:function(t,e,i){var a=i(246);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(162)("6963c32c",a,!0,{})},274:function(t,e,i){function a(t){i(268)}var n=i(25)(i(219),i(295),a,"data-v-ccbad8ca",null);t.exports=n.exports},292:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"work"},[i("div",{staticStyle:{"background-color":"#fff"}},[i("v-layout",{staticStyle:{height:"100%"},attrs:{"align-center":""}},[i("v-btn",{attrs:{flat:"",icon:"",color:"yellow darken-1"},on:{click:function(e){t.quit("projects")}}},[i("v-icon",[t._v("arrow_back")])],1),t._v(" "),i("v-spacer")],1)],1),t._v(" "),i("v-container",{attrs:{fluid:"","grid-list-lg":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:"","d-flex":""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticStyle:{height:"100%"}},[i("v-text-field",{attrs:{label:"项目名",id:"testing",disabled:""},model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}})],1)],1)],1),t._v(" "),i("v-flex",{attrs:{xs3:"","d-flex":""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticStyle:{height:"100%"}},[i("v-text-field",{attrs:{value:"***",label:"客户名",id:"testin",disabled:""}})],1)],1)],1),t._v(" "),i("v-flex",{attrs:{xs3:"","d-flex":""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticStyle:{height:"100%"}},[i("v-text-field",{attrs:{value:t.createTime1(t.project._id),label:"创建时间",disabled:""}})],1)],1)],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticStyle:{padding:"0px 16px",height:"48px"}},[i("span",{staticClass:"grey--text caption"},[t._v("有 "+t._s(t.workLength)+" 个任务")])])],1)],1),t._v(" "),(t.project.image?t.project.image.length||0:100)?i("v-flex",{attrs:{xs12:""}},[i("v-layout",{attrs:{row:"",wrap:""}},t._l(t.project.image,function(e,a){return t.user.realInformation.name===e.renderName||t.user.realInformation.name===e.modelName?i("v-flex",{key:e._id,attrs:{xs6:""}},[i("v-card",{attrs:{flat:""}},[i("v-container",{attrs:{fluid:"","grid-list-lg":""}},[i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-card-media",{attrs:{height:"131.5px"}},[i("upload",{attrs:{pid:t.project._id,image:e}})],1)],1),t._v(" "),i("v-flex",{attrs:{xs9:""}},[i("div",[i("div",{staticClass:"subheading",staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(e.style+"-"+e.designType+"-"+e.space+"-"+e.area+"-"+e.imageType+"视角-"+(a+1))+"\n                                                "),i("v-spacer"),t._v(" "),i("span",{staticClass:"grey--text caption"},[t._v(t._s(t.createTime1(e._id)))])],1),t._v(" "),i("v-divider",{staticStyle:{"margin-top":"12px","margin-bottom":"10px"}}),t._v(" "),1!==e.isFinish?i("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[t._v("\n                                                    "+t._s("状态：未完成")+"\n                                                ")]):i("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[i("span",[t._v("状态：")]),t._v(" "),i("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[t._v("完成")]),t._v(" "),i("v-spacer"),t._v(" "),i("span",[t._v(t._s(t.createTime2(e.finishTime)))])],1)],1),t._v(" "),i("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[i("span",[t._v("建模：")]),t._v(" "),e.modelId?i("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+e.modelName))]):i("span",[t._v("无")]),t._v(" "),i("v-spacer"),t._v(" "),i("span",[t._v("渲染：")]),t._v(" "),e.renderId?i("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+e.renderName))]):i("span",[t._v("无")]),t._v(" "),i("v-spacer")],1),t._v(" "),e.model?i("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[i("span",[t._v("模型：")]),t._v(" "),i("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+e.model.name))]),t._v(" "),i("v-spacer"),t._v(" "),t.user.realInformation.name===e.renderName?i("v-btn",{staticClass:"my-btn",attrs:{small:""},on:{click:function(i){t.modelDialogOpen(e.model?e.model:"",e._id)}}},[i("span",{staticClass:" caption"},[t._v("替换")])]):t._e()],1):i("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[i("span",[t._v("模型：无")]),t._v(" "),i("v-spacer"),t._v(" "),t.user.realInformation.name===e.renderName&&1===e.isFinish?i("v-btn",{staticClass:"my-btn",attrs:{small:""},on:{click:function(i){t.modelDialogOpen(e.model?e.model:"",e._id)}}},[i("span",{staticClass:" caption"},[t._v("添加")])]):t._e()],1)])],1)],1)],1)],1):t._e()}))],1):t._e(),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticStyle:{padding:"0px 16px",height:"48px"}},[i("span",{staticClass:"grey--text caption"},[t._v("有 "+t._s(t.project.image?t.project.image.length-t.workLength:0)+" 个相关任务")])])],1)],1),t._v(" "),(t.project.image?t.project.image.length-t.workLength>0:0)?i("v-flex",{attrs:{xs12:""}},[i("v-layout",{attrs:{row:"",wrap:""}},t._l(t.project.image,function(e,a){return t.user.realInformation.name!==e.renderName&&t.user.realInformation.name!==e.modelName?i("v-flex",{key:e._id,attrs:{xs6:""}},[i("v-card",{attrs:{flat:"",color:"grey lighten-2"}},[i("v-container",{attrs:{fluid:"","grid-list-lg":""}},[i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-card-media",{attrs:{height:"131.5px"}},[i("upload",{attrs:{pid:t.project._id,image:e}})],1)],1),t._v(" "),i("v-flex",{attrs:{xs9:""}},[i("div",[i("div",{staticClass:"subheading",staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(e.style+"-"+e.designType+"-"+e.space+"-"+e.area+"-"+e.imageType+"视角-"+(a+1))+"\n                                                "),i("v-spacer"),t._v(" "),i("span",{staticClass:"grey--text caption"},[t._v(t._s(t.createTime1(e._id)))])],1),t._v(" "),i("v-divider",{staticStyle:{"margin-top":"12px","margin-bottom":"10px"}}),t._v(" "),1!==e.isFinish?i("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[t._v("\n                                                    "+t._s("状态：未完成")+"\n                                                ")]):i("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[i("span",[t._v("状态：")]),t._v(" "),i("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[t._v("完成")]),t._v(" "),i("v-spacer"),t._v(" "),i("span",[t._v(t._s(t.createTime2(e.finishTime)))])],1)],1),t._v(" "),i("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[i("span",[t._v(t._s("建模："+(e.modelId?e.modelName:"无")))]),t._v(" "),i("v-spacer"),t._v(" "),i("span",[t._v(t._s("渲染："+(e.renderId?e.renderName:"无")))]),t._v(" "),i("v-spacer")],1),t._v(" "),i("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[i("span",[t._v("模型：")]),t._v(" "),e.model?i("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+e.model.name))]):i("span",[t._v("无"+t._s(e.renderName))]),t._v(" "),i("v-spacer")],1)])],1)],1)],1)],1):t._e()}))],1):t._e(),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticStyle:{padding:"0px 16px",height:"48px"}},[i("span",{staticClass:"grey--text caption"},[t._v("项目文件")])])],1)],1),t._v(" "),i("v-flex",[i("modelfilm",{attrs:{pid:t.project._id,fileList:t.project.modelFile},on:{close:function(e){t.uploadDialogClose()}}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticStyle:{padding:"0px 16px",height:"48px"}},[i("span",{staticClass:"grey--text caption"},[t._v("参考文件")])])],1)],1),t._v(" "),i("v-flex",[i("file",{attrs:{pid:t.project._id,fileList:t.project.referenceFile},on:{close:function(e){t.uploadDialogClose()}}})],1)],1)],1),t._v(" "),i("v-dialog",{attrs:{persistent:"","max-width":"860px"},model:{value:t.modelDialog.state,callback:function(e){t.$set(t.modelDialog,"state",e)},expression:"modelDialog.state"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"title text-xs-center",staticStyle:{width:"100%"}},[t._v("模型选择")])]),t._v(" "),i("v-divider"),t._v(" "),i("v-card-text",[i("v-container",{attrs:{fluid:"","grid-list-sm":""}},[i("v-layout",{attrs:{row:"",wrap:""}},t._l(t.project.modelFile,function(e){return i("v-flex",{key:e.name,attrs:{xs2:""}},[i("v-card",{attrs:{flat:""}},[i("v-card-media",{class:{"action-card":e.name===t.modelDialog.action.name},attrs:{src:t.fileIcon,height:"133.5px"},on:{click:function(i){t.actionModel(e)}}},[i("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"flex-end","align-items":"center"}},[i("span",{staticClass:"caption white--text"},[t._v("\n                                        "+t._s(e.name)+"\n                                     ")])])])],1)],1)}))],1)],1),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{flat:"",color:"deep-orange"},on:{click:function(e){t.modelDialogClose()}}},[t._v("取消")]),t._v(" "),i("v-btn",{attrs:{flat:"",loading:this.$store.state.appLoading},on:{click:function(e){t.putProImgMod()}}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]}},295:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"model"},[i("v-layout",{attrs:{wrap:""}},[i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"xFile",multiple:""},on:{change:function(e){t.fileChange()}}}),t._v(" "),i("v-flex",{attrs:{xs2:""}},[i("v-btn",{staticStyle:{height:"217px",width:"100%",padding:"0px",margin:"0px"},attrs:{depressed:""},on:{click:t.openFile}},[i("v-flex",{attrs:{xs12:""}},[i("div",{staticStyle:{margin:"8px",display:"flex","justify-content":"center","align-items":"center"}},[i("v-icon",{attrs:{color:"grey"}},[t._v("add")])],1),t._v(" "),i("div",{staticStyle:{margin:"8px",display:"flex","justify-content":"center","align-items":"center"}},[i("span",{staticClass:"grey--text caption"},[t._v("点击添加文件")])])])],1)],1),t._v(" "),t._l(t.newFileList,function(e,a){return 2!==e.state?i("v-flex",{key:a,attrs:{xs2:""}},[e.state?i("v-card",[i("v-card-media",{attrs:{src:e.src?e.src:t.fileIcon,height:"185px"}},[i("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[i("v-progress-circular",{attrs:{size:100,width:15,rotate:270,value:100*e.progress,color:"yellow"}},[t._v("\n                            "+t._s(100*e.progress)+"%\n                        ")]),t._v(" "),i("br"),t._v(" "),i("span",{staticClass:"title white--text"},[t._v("\n                            "+t._s(e.file.name.substring(e.file.name.lastIndexOf(".")+1))+"\n                        ")])],1)]),t._v(" "),i("v-container",{staticStyle:{padding:"8px"},attrs:{"fill-height":"",fluid:""}},[i("v-layout",[i("v-flex",{staticStyle:{"padding-top":"8px","padding-bottom":"0px"},attrs:{xs10:"","align-end":"",flexbox:""}},[i("span",{staticClass:"lengthLimit"},[t._v(t._s(e.file.name))])]),t._v(" "),i("v-flex",{attrs:{xs2:""}},[i("v-layout",{attrs:{"justify-end":"","fill-height":""}})],1)],1)],1)],1):i("v-card",{attrs:{flat:""}},[i("v-card-media",{attrs:{src:e.src?e.src:t.fileIcon,height:"185px"}},[e.src?t._e():i("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[i("br"),t._v(" "),i("span",{staticClass:"title white--text"},[t._v("\n                            "+t._s(e.name.substring(e.name.lastIndexOf(".")+1))+"\n                        ")])])]),t._v(" "),i("v-container",{staticStyle:{padding:"8px"},attrs:{"fill-height":"",fluid:""}},[i("v-layout",[i("v-flex",{staticStyle:{"padding-top":"8px","padding-bottom":"0px"},attrs:{xs10:"","align-end":"",flexbox:""}},[i("span",{staticClass:"lengthLimit"},[t._v(t._s(e.name))])]),t._v(" "),i("v-menu",{attrs:{"offset-y":""}},[i("v-btn",{staticStyle:{margin:"0px","margin-right":"4px"},attrs:{slot:"activator",icon:"",small:"",light:"",dark:""},slot:"activator"},[i("v-icon",{attrs:{color:"grey darken-2"}},[t._v("more_vert")])],1),t._v(" "),i("v-list",[i("v-list-tile",{on:{click:function(i){t.deleteRefFile(e.name)}}},[i("v-list-tile-title",{staticClass:"body-1"},[t._v("删除")])],1),t._v(" "),i("v-list-tile",{on:{click:function(i){t.downRefFile(e.object,e.name)}}},[i("v-list-tile-title",{staticClass:"body-1"},[t._v("下载")])],1)],1)],1)],1)],1)],1)],1):t._e()})],2)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=1.285942a9df5fc67c2c1a.js.map