webpackJsonp([21],{134:function(t,e){},135:function(t,e){},136:function(t,e){},149:function(t,e,n){t.exports=n.p+"static/img/logo2.d14088a.png"},150:function(t,e,n){t.exports=n.p+"static/img/wechat.c2bb2dd.png"},151:function(t,e,n){function a(t){n(136)}var o=n(25)(n(77),n(155),a,"data-v-e44dc4f8",null);t.exports=o.exports},152:function(t,e,n){function a(t){n(134)}var o=n(25)(n(78),n(153),a,null,null);t.exports=o.exports},153:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{lg12:""}},[a("v-flex",{attrs:{lg12:""}},[a("v-layout",{attrs:{"justify-end":""}},[a("v-btn",{staticStyle:{margin:"0px"},attrs:{flat:"",icon:"",small:""},on:{click:function(e){t.toclose()}}},[a("v-icon",[t._v("close")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"center","padding-top":"32px","padding-bottom":"16px"}},[a("span",{staticClass:"headline"},[t._v("图境云")])]),t._v(" "),a("v-form",{attrs:{light:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{color:"grey darken-4",label:"手机号/邮箱",rules:t.accountRuler},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),t._v(" "),a("v-text-field",{attrs:{color:"grey darken-4",label:"密码",min:"8",type:"password",rules:t.passwordRuler,counter:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("v-btn",{staticStyle:{width:"100%",margin:"auto","margin-top":"16px","margin-bottom":"20px"},attrs:{color:"yellow"}},[t._v("\n        登入\n      ")]),t._v(" "),a("v-layout",{attrs:{row:"","align-statr":""}},[a("v-flex",{attrs:{lg6:""}},[a("v-checkbox",{attrs:{label:"记住我",color:"grey"},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}})],1),t._v(" "),a("v-flex",{attrs:{lg6:""}},[a("v-layout",{attrs:{"justify-end":""}},[a("v-btn",{staticStyle:{margin:"0px","margin-top":"2px","min-width":"10px",color:"#aaa"},attrs:{small:"",flat:""}},[a("span",{},[t._v("忘记密码")])]),t._v(" "),a("v-btn",{staticStyle:{margin:"0px","margin-top":"2px","margin-left":"0px","min-width":"10px",color:"#aaa"},attrs:{small:"",flat:""}},[a("span",[t._v("注册")])])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"48px","margin-bottom":"16px"}},[a("v-layout",{attrs:{"md-gutter":""}},[a("v-flex",{attrs:{lg5:""}},[a("div",{staticStyle:{width:"100%","margin-top":"9px","border-style":"solid","border-width":"1px 0px 0px 0px","border-color":"#ccc"}})]),t._v(" "),a("v-layout",{attrs:{"justify-center":""}},[a("span",{staticClass:"caption",staticStyle:{color:"#999"}},[t._v("其他登入")])]),t._v(" "),a("v-flex",{attrs:{lg5:""}},[a("div",{staticStyle:{width:"100%","margin-top":"9px","border-style":"solid","border-width":"1px 0px 0px 0px","border-color":"#ccc"}})])],1)],1),t._v(" "),a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-btn",{staticStyle:{"background-color":"#3cb034"},attrs:{fab:"",small:""},on:{click:function(e){t.wechatLogin()}}},[a("img",{staticStyle:{width:"28px"},attrs:{src:n(150),alt:"wechat"}})])],1)],1)],1)],1)},staticRenderFns:[]}},154:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.appLoading,expression:"this.$store.state.appLoading"}],staticClass:"elevation-1",staticStyle:{"background-color":"#fff",top:"51px",position:"absolute",width:"100%","min-width":"1280px","z-index":"10"}},[n("v-progress-linear",{staticStyle:{margin:"0px"},attrs:{indeterminate:this.$store.state.appLoading,height:"3",color:"yellow ","background-color":"black"}})],1),t._v(" "),n("div",{staticClass:"elevation-1",staticStyle:{"background-color":"#fff",position:"absolute",width:"100%","min-width":"1280px","z-index":"2"}},[n("pmenu",{on:{toLogin:function(e){t.to_login()}}})],1),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"340"},model:{value:t.loginDialog,callback:function(e){t.loginDialog=e},expression:"loginDialog"}},[n("login",{on:{close:function(e){t.to_close()}}})],1),t._v(" "),n("v-snackbar",{attrs:{timeout:6e3,top:"",color:"error"},model:{value:t.errorSnackbar.state,callback:function(e){t.$set(t.errorSnackbar,"state",e)},expression:"errorSnackbar.state"}},[t._v("\n    "+t._s(t.errorSnackbar.text)+"\n  ")]),t._v(" "),n("v-snackbar",{attrs:{timeout:6e3,top:"",color:"success"},model:{value:t.successSnackbar.state,callback:function(e){t.$set(t.successSnackbar,"state",e)},expression:"successSnackbar.state"}},[t._v("\n    "+t._s(t.successSnackbar.text)+"\n  ")]),t._v(" "),n("v-snackbar",{attrs:{timeout:0,top:"",color:"info"},model:{value:t.infoSnackbar.state,callback:function(e){t.$set(t.infoSnackbar,"state",e)},expression:"infoSnackbar.state"}},[t._v("\n    "+t._s(t.infoSnackbar.text)+"\n    "),n("v-btn",{staticStyle:{"min-wight":"0px"},attrs:{dark:"",flat:"",fab:"",small:""},on:{click:function(e){t.infoSnackbar.state=!1}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("keep-alive",[t.$route.meta.keepAlive?n("router-view",{staticClass:"routerView"}):t._e()],1),t._v(" "),t.$route.meta.keepAlive?t._e():n("router-view",{staticClass:"routerView"})],1)},staticRenderFns:[]}},155:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-menu"},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{lg2:""}},[a("v-layout",{staticStyle:{"margin-left":"100px"},attrs:{row:"",wrap:"","justify-start":""}},[a("v-avatar",[a("img",{attrs:{src:n(149),alt:"logo"},on:{click:function(e){t.toggleRightSidenav()}}})])],1)],1),t._v(" "),a("v-flex",{attrs:{lg8:""}},[a("v-layout",{attrs:{"justify-center":"","align-content-space-between":""}},t._l(t.menuText,function(e){return a("v-btn",{key:e.title,staticClass:"menu-btn",class:{"menu-active":e.url===t.active},attrs:{flat:""},on:{click:function(n){t.urlChange(e.url)}}},[t._v("\n                    "+t._s(e.title)+"\n                 ")])}))],1),t._v(" "),a("v-flex",{attrs:{lg2:""}},[a("v-layout",{staticStyle:{"margin-right":"100px"},attrs:{row:"","justify-end":""}},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.user._id,expression:"!user._id"}],staticStyle:{"margin-right":"0px","min-width":"10px",color:"#aaa"},attrs:{flat:""},on:{click:function(e){t.to_login()}}},[t._v("登入")]),t._v(" "),t.user._id&&-1!==t.user.authority.indexOf("service")?a("v-btn",{staticClass:"menu-btn-o",attrs:{flat:""},on:{click:function(e){t.urlChange("/publish")}}},[a("i",{staticClass:"material-icons"},[t._v("cloud_upload")])]):t._e(),t._v(" "),t.user._id?a("v-menu",{attrs:{"offset-y":"",left:"","min-width":"310","max-width":"310"}},[a("v-btn",{staticClass:"menu-btn-o",attrs:{slot:"activator",flat:""},slot:"activator"},[a("v-badge",{attrs:{color:"red"},model:{value:this.notifyShow,callback:function(e){t.$set(this,"notifyShow",e)},expression:"this.notifyShow"}},[a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(this.notifyNumber))]),t._v(" "),a("i",{staticClass:"material-icons"},[t._v("notifications")])])],1),t._v(" "),a("v-card",{attrs:{flat:""}},[a("v-card-title",{},[a("span",{staticClass:"subheading"},[t._v("消息盒")])]),t._v(" "),a("v-divider"),t._v(" "),a("v-list",{staticStyle:{height:"230px","overflow-y":"auto"}},t._l(t.notifyData,function(e,n){return a("div",{key:n},[a("v-list-tile",{on:{click:function(n){t.putNotify(e)}}},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"body-2 ",class:{"grey--text":1===e.state},staticStyle:{"font-weight":"bold"}},[t._v("【"+t._s(t.notifyType[e.ntype])+"】")]),t._v(" "),a("v-list-tile-title",{staticClass:"caption",class:{"grey--text":1===e.state}},[t._v(t._s(e.concent))])],1)],1),t._v(" "),a("v-divider")],1)})),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[a("v-btn",{attrs:{flat:""},on:{click:function(e){t.urlChange("/notify")}}},[a("span",{staticClass:"body-2",staticStyle:{}},[t._v("查看全部")])])],1)],1)],1)],1):t._e(),t._v(" "),t.user._id?a("v-menu",{attrs:{"offset-y":"",left:""}},[a("v-btn",{staticClass:"menu-btn-o",staticStyle:{height:"50px",width:"64px","min-width":"20px",margin:"0px",padding:"0px"},attrs:{slot:"activator",flat:""},slot:"activator"},[a("v-avatar",{attrs:{size:"38px"}},[a("img",{attrs:{src:t.user.headimgurl,alt:"Avatar"}})])],1),t._v(" "),a("v-list",{attrs:{dense:""}},[-1!==t.user.authority.indexOf("render")?a("v-list-tile",{on:{click:function(e){t.urlChange("/works")}}},[a("v-list-tile-title",{staticClass:"body-1"},[t._v("我的任务")])],1):t._e(),t._v(" "),-1!==t.user.authority.indexOf("service")?a("v-list-tile",{on:{click:function(e){t.urlChange("/projects")}}},[a("v-list-tile-title",{staticClass:"body-1"},[t._v("项目管理")])],1):t._e(),t._v(" "),-1!==t.user.authority.indexOf("customerManager")?a("v-list-tile",{on:{click:function(e){t.urlChange("/customer")}}},[a("v-list-tile-title",{staticClass:"body-1"},[t._v("客户管理")])],1):t._e(),t._v(" "),-1!==t.user.authority.indexOf("financial")?a("v-list-tile",{on:{click:function(e){t.urlChange("/financial")}}},[a("v-list-tile-title",{staticClass:"body-1"},[t._v("财务管理")])],1):t._e(),t._v(" "),-1!==t.user.authority.indexOf("boss")?a("v-list-tile",{on:{click:function(e){t.urlChange("/boss/statistics")}}},[a("v-list-tile-title",{staticClass:"body-1"},[t._v("公司管理")])],1):t._e(),t._v(" "),-1!==t.user.authority.indexOf("admin")?a("v-list-tile",{on:{click:function(e){t.urlChange("/admin/sd")}}},[a("v-list-tile-title",{staticClass:"body-1"},[t._v("系统管理")])],1):t._e(),t._v(" "),a("v-list-tile",{on:{click:function(e){t.urlChange("/account/personalData")}}},[a("v-list-tile-title",{staticClass:"body-1"},[t._v("账号管理")])],1),t._v(" "),a("v-divider"),t._v(" "),a("v-list-tile",{on:{click:function(e){t.signOut()}}},[a("v-list-tile-title",{staticClass:"body-1"},[t._v("退出登入")])],1)],1)],1):t._e()],1)],1)],1)],1)},staticRenderFns:[]}},160:function(t,e){},65:function(t,e,n){"use strict";var a=n(15),o=n(156),s=function(){return n.e(19).then(n.bind(null,163))},r=function(){return n.e(16).then(n.bind(null,182))},c=function(){return n.e(4).then(n.bind(null,181))},i=function(){return n.e(1).then(n.bind(null,180))},u=function(){return n.e(12).then(n.bind(null,170))},l=function(){return n.e(13).then(n.bind(null,167))},p=function(){return n.e(17).then(n.bind(null,169))},f=function(){return n.e(18).then(n.bind(null,168))},m=function(){return n.e(7).then(n.bind(null,175))},d=function(){return n.e(8).then(n.bind(null,174))},g=function(){return n.e(10).then(n.bind(null,172))},v=function(){return n.e(11).then(n.bind(null,171))},h=function(){return n.e(9).then(n.bind(null,173))},k=function(){return n.e(14).then(n.bind(null,166))},b=function(){return n.e(15).then(n.bind(null,165))},y=function(){return n.e(2).then(n.bind(null,164))},x=function(){return n.e(5).then(n.bind(null,177))},S=function(){return n.e(6).then(n.bind(null,176))},w=function(){return n.e(3).then(n.bind(null,179))},_=function(){return n.e(0).then(n.bind(null,178))};a.default.use(o.a),e.a=new o.a({mode:"history",routes:[{name:"/",path:"/",component:s,meta:{keepAlive:!0}},{name:"publish",path:"/publish",component:r,meta:{keepAlive:!0}},{name:"works",path:"/works",component:c,meta:{keepAlive:!1}},{name:"work",path:"/works/:pid",component:i,meta:{keepAlive:!1}},{name:"projects",path:"/projects",component:w,meta:{keepAlive:!1}},{name:"project",path:"/projects/:pid",component:_,meta:{keepAlive:!1}},{name:"admin",path:"/admin",component:u,meta:{keepAlive:!1},children:[{path:"aam",component:l},{path:"sd",component:p},{path:"cr",component:f}]},{name:"boss",path:"/boss",component:m,meta:{keepAlive:!1},children:[{path:"authority",component:g},{path:"authenticate",component:v},{path:"statistics",component:d},{path:"setting",component:h}]},{name:"account",path:"/account",component:k,meta:{keepAlive:!1},children:[{path:"personalData",component:b},{path:"accountSecurity",component:y}]},{name:"notify",path:"/notify",component:x,meta:{keepAlive:!1}},{name:"customer",path:"/customer",component:S,meta:{keepAlive:!1}}]})},66:function(t,e,n){"use strict";var a=n(15),o=n(158),s=n(88),r=n(85),c=n(87),i=n(86),u=n(82),l=n(83),p=n(81),f=n(84),m=n(80);a.default.use(o.a);var d={socketClass:m.a,router:{},loginDialog:!1,errorSnackbar:{state:!1,text:"what are you doing"},successSnackbar:{state:!1,text:"what are you doing"},infoSnackbar:{state:!1,text:"what are you doing"},appLoading:!1,url:[]},g={},v={getRouter:function(t,e){t.commit;t.state.router=e},initialize:function(t){var e=(t.commit,t.state);e.router.beforeEach(function(t,n,a){e.url=[];for(var o=t.path,s=0,r=0,c=0;c<10;){if(c+=1,-1==(r=t.path.indexOf("/",s+1))){e.url.push(o);break}var i=o.slice(s,r);e.url.push(i),o=o.slice(r++),s=r++}console.log(e.url),a()}),e.socketClass.socket.on("connect",function(){console.log("连接成功");var t=localStorage.getItem("accessToken");console.log(t),t&&e.socketClass.socket.emit("authentication",t)})},initRouter:function(t,e){var n=(t.commit,t.state);n.url=[];for(var a=e,o=0,s=0,r=0;r<10;){if(r+=1,-1==(s=e.indexOf("/",o+1))){n.url.push(a);break}var c=a.slice(o,s);n.url.push(c),a=a.slice(s++),o=s++}}},h={user:s.a,login:r.a,project:c.a,ossFile:i.a,admin:u.a,boss:l.a,account:p.a,customer:f.a};e.a=new o.a.Store({state:d,mutations:g,actions:v,modules:h})},67:function(t,e){},68:function(t,e,n){function a(t){n(135)}var o=n(25)(n(76),n(154),a,null,null);t.exports=o.exports},76:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=n.n(a),s=n(10),r=n.n(s),c=n(151),i=n.n(c),u=n(152),l=n.n(u);e.default={name:"app",components:{pmenu:i.a,login:l.a},data:function(){return{source:"source",mini:!0}},computed:{user:function(){return this.$store.state.user},loginType:function(){return this.$store.state.login.loginType},loginDialog:function(){return this.$store.state.loginDialog},errorSnackbar:function(){return this.$store.state.errorSnackbar},successSnackbar:function(){return this.$store.state.successSnackbar},infoSnackbar:function(){return this.$store.state.infoSnackbar}},methods:{to_close:function(){this.$store.state.loginDialog=!1},to_login:function(){this.$store.state.loginDialog=!0}},mounted:function(){var t=this;return r()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.state.url[0]||(console.log(t.$route.path),t.$store.dispatch("initRouter",t.$route.path)),setTimeout(function(){t.$store.dispatch("getAllWriteAndReadProjectStsToken",{})},100);case 2:case"end":return e.stop()}},e,t)}))()},beforeCreate:function(){this.$store.dispatch("getRouter",this.$router),this.$store.dispatch("appError"),this.$store.dispatch("loginSuccess"),this.$store.dispatch("authenticationSuccess"),this.$store.dispatch("notify"),this.$store.dispatch("initialize")},created:function(){console.log("created")},beforeMount:function(){console.log("beforeMount")},beforeDestroy:function(){console.log("beforeDestroy")},destroyed:function(){console.log("destroyed")}}},77:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=n.n(a),s=n(10),r=n.n(s);e.default={name:"my-menu",props:[],data:function(){return{dialog:!1,text:"首页",menuText:[{title:"首页",router:"/",url:"/"},{title:"资讯",router:"login",url:"/login"},{title:"活动",router:"activity",url:"/statistics"},{title:"素材",router:"material",url:"/material"}],items:[{title:"我的统计",router:"statistics",url:"/statistics"},{title:"账号管理",router:"account",url:"/account/personalData"}],show:!1,notifyType:["","系统","任务"]}},computed:{user:function(){return this.$store.state.user},notifyData:function(){return this.$store.state.user.notify.reverse()},active:function(){return this.$store.state.url[0]},notifyNumber:function(){return this.$store.state.user.notifyNumber},notifyShow:function(){return this.$store.state.user.notifyNumber>0}},methods:{urlChange:function(t){this.$router.push({path:t})},putNotify:function(t){var e=this;return r()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log(t),n.next=4,e.$store.dispatch("putNotify",{_id:t._id});case 4:e.urlChange(t.router),e.$store.dispatch("getNotify",{notifyType:0,currentPage:1}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},n,e,[[0,8]])}))()},to_login:function(){this.$emit("toLogin")},signOut:function(){this.$store.dispatch("signOut")}},mounted:function(){},beforeCreate:function(){}}},78:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"login",data:function(){return{checkbox:"",valid:!1,account:"",password:"",accountRuler:[function(t){return!!t||"请输入账号"},function(t){return t.length<=10||"Name must be less than 10 characters"}],passwordRuler:[function(t){return!!t||"请输入密码"}],loading:!1}},computed:{form:function(){return this.$store.state.user}},methods:{toclose:function(){this.$emit("close")},wechatLogin:function(){var t=this.$store.state.socketClass.socket.id;window.open("https://open.weixin.qq.com/connect/qrconnect?appid=wx578ee588948c8fcc&redirect_uri=http://cloud.tujingwang.cn/user/wechat&response_type=code&scope=snsapi_login&state="+t+"#wechat_redirect")}},mounted:function(){}}},79:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),o=n(69),s=n.n(o),r=n(67),c=(n.n(r),n(68)),i=n.n(c),u=n(65),l=n(66);a.default.use(s.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:u.a,store:l.a,template:"<App/>",components:{App:i.a}})},80:function(t,e,n){"use strict";function a(){var t=this;this.opt={query:{},transports:["websocket"]},this.socket=c.a.connect("http://47.97.215.115:80/",this.opt),this.socket.on("reconnect",function(){console.log("重新链接成功")}),this.socket.on("connecting",function(){console.log("正在重连...")}),this.socket.on("connect_error",function(t){console.log("connect_"+t)}),this.connect=function(e,n){t.opt.query={account:e,password:n},t.socket.disconnect(),setTimeout(function(){t.socket.open()},100)},this.myEmit=function(e,n){return new s.a(function(a,o){t.socket.on("disconnect",function(){o({message:"网络中断"}),t.socket.removeAllListeners("disconnect")}),t.socket.emit(e,n,function(e){e.err?(o({message:e.message}),t.socket.removeAllListeners("disconnect")):(a(e),t.socket.removeAllListeners("disconnect"))})})}}var o=n(5),s=n.n(o),r=n(145),c=n.n(r);e.a=new a},81:function(t,e,n){"use strict";var a=n(11),o=n.n(a),s=n(10),r=n.n(s),c=n(5),i=n.n(c),u={putContactInformationLoading:!1,putRealInformationLoading:!1},l={setUser:function(t,e){for(var n in e)t[n]=e[n]}},p={putContactInformation:function(t){var e=(t.commit,t.state),n=t.rootState;e.putContactInformationLoading=!0,n.socketClass.myEmit("putContactInformation",{_id:n.user._id,QQ:n.user.contactInformation.QQ,wechat:n.user.contactInformation.wechat}).then(function(t){n.successSnackbar={state:!0,text:"保存成功"},e.putContactInformationLoading=!1}).catch(function(t){setTimeout(function(){e.putContactInformationLoading=!1,n.errorSnackbar={state:!0,text:t.message}},800)})},putRealInformation:function(t,e){var n=(t.commit,t.state,t.rootState);return new i.a(function(t,a){n.appLoading=!0,n.socketClass.myEmit("putRealInformation",{name:e.name,IDNumber:e.IDNumber,bankCardAccount:e.bankCardAccount,openingBank:e.openingBank}).then(function(e){n.user.realInformation.state=1,t(),setTimeout(function(){n.appLoading=!1,n.successSnackbar={state:!0,text:"提交成功"}},300)}).catch(function(t){setTimeout(function(){n.appLoading=!1,n.errorSnackbar={state:!0,text:t.message}},300)})})},getRender:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.socketClass.myEmit("getRender",{pageSize:e.pageSize,currentPage:e.currentPage,authority:e.authority,search:e.search});case 3:return s=t.sent,t.abrupt("return",s);case 7:t.prev=7,t.t0=t.catch(0),a.errorSnackbar={state:!0,text:t.t0.message};case 10:case"end":return t.stop()}},t,n,[[0,7]])}))()}},f={},m={state:u,mutations:l,actions:p,getters:f};e.a=m},82:function(t,e,n){"use strict";var a=n(5),o=n.n(a),s={totalAccount:0,disableAccount:0,bossAccounts:[],bossAccountsCount:0,bossAccount:{},getBossAccountsLoading:!1,getBossAccountStatisticsLoading:!1,putBossAccountLoading:!1},r={setUser:function(t,e){},setBossAccounts:function(t,e){t.bossAccounts=e.users,t.bossAccountsCount=e.count},setBossAccountStatistics:function(t,e){t.totalAccount=e.total,t.disableAccount=e.disable}},c={getBossAccounts:function(t,e){var n=t.commit,a=t.state,o=t.rootState;a.getBossAccountsLoading=!0,o.socketClass.myEmit("getBossAccounts",{pageSize:e.pageSize,currentPage:e.currentPage,isDisable:e.isDisable}).then(function(t){n("setBossAccounts",t),a.getBossAccountsLoading=!1}).catch(function(t){setTimeout(function(){a.getBossAccountsLoading=!1,o.errorSnackbar={state:!0,text:t.message}},800)})},getBossAccountStatistics:function(t){var e=t.commit,n=t.state,a=t.rootState;n.getBossAccountStatisticsLoading=!0,a.socketClass.myEmit("getBossAccountStatistics",{}).then(function(t){e("setBossAccountStatistics",t),n.getBossAccountStatisticsLoading=!1}).catch(function(t){setTimeout(function(){n.getBossAccountStatisticsLoading=!1,a.errorSnackbar={state:!0,text:t.message}},800)})},putBossAccount:function(t,e){var n=(t.commit,t.state),a=t.rootState;return new o.a(function(t,o){n.putBossAccountLoading=!0,a.socketClass.myEmit("putBossAccount",e).then(function(e){setTimeout(function(){a.successSnackbar={state:!0,text:"保存成功"},n.putBossAccountLoading=!1},800),t("success")}).catch(function(t){setTimeout(function(){n.putBossAccountLoading=!1,console.log(t),a.errorSnackbar={state:!0,text:t.message}},800)})})}},i={},u={state:s,mutations:r,actions:c,getters:i};e.a=u},83:function(t,e,n){"use strict";var a=n(5),o=n.n(a),s=n(141),r=(n.n(s),{totalAccount:0,staffAccounts:[],staffAccountsCount:0,staffAccount:{},authenticateAccounts:[],authenticateAccountsCount:0,authenticateAccount:{},getStaffAccountsLoading:!1}),c={setUser:function(t,e){},setStaffAccounts:function(t,e){t.staffAccounts=[];for(var n in e.users)t.staffAccounts.push(e.users[n]);t.staffAccountsCount=e.count},setAuthenticateAccounts:function(t,e){t.authenticateAccounts=[];for(var n in e.users)t.authenticateAccounts[n]=e.users[n];t.authenticateAccountsCount=e.count},setStaffAccountStatistics:function(t,e){t.totalAccount=e.total,t.disableAccount=e.disable}},i={getStaffAccounts:function(t,e){var n=t.commit,a=(t.state,t.rootState);a.appLoading=!0,a.socketClass.myEmit("getStaffAccounts",{pageSize:e.pageSize,currentPage:e.currentPage,authority:e.authority,_id:a.user._id}).then(function(t){setTimeout(function(){n("setStaffAccounts",t),a.appLoading=!1},300)}).catch(function(t){setTimeout(function(){a.appLoading=!1,a.errorSnackbar={state:!0,text:t.message}},300)})},getAuthenticateAccounts:function(t,e){var n=t.commit,a=(t.state,t.rootState);a.appLoading=!0,a.socketClass.myEmit("getAuthenticateAccounts",{pageSize:e.pageSize,currentPage:e.currentPage,state:e.state}).then(function(t){n("setAuthenticateAccounts",t),setTimeout(function(){a.appLoading=!1},300)}).catch(function(t){setTimeout(function(){a.appLoading=!1,a.errorSnackbar={state:!0,text:t.message}},300)})},putAuthenticate:function(t,e){var n=(t.commit,t.state,t.rootState);return new o.a(function(t,a){n.appLoading=!0,n.socketClass.myEmit("putAuthenticate",{_id:e._id,state:e.state}).then(function(e){t(),setTimeout(function(){n.appLoading=!1},300)}).catch(function(t){a(t),setTimeout(function(){n.appLoading=!1},300)})})},putAuthority:function(t,e){var n=(t.commit,t.state,t.rootState);return new o.a(function(t,a){n.appLoading=!0,n.socketClass.myEmit("putAuthority",{_id:e._id,authority:e.authority}).then(function(e){t(),setTimeout(function(){n.appLoading=!1,n.successSnackbar={state:!0,text:"权限设置成功"}},300)}).catch(function(t){a(t),setTimeout(function(){n.appLoading=!1,n.errorSnackbar={state:!0,text:t.message}},300)})})}},u={},l={state:r,mutations:c,actions:i,getters:u};e.a=l},84:function(t,e,n){"use strict";var a=n(5),o=n.n(a),s={customers:[],count:0},r={setcustomers:function(t,e){t.customers=e.customers,t.count=e.count}},c={wechatLogin:function(t){var e=t.commit;t.state,t.rootState;e("toWechat")},postCustomer:function(t,e){var n=(t.commit,t.state,t.rootState);return n.appLoading=!0,new o.a(function(t,a){n.socketClass.myEmit("postCustomer",e).then(function(e){setTimeout(function(){n.successSnackbar={state:!0,text:"添加成功"},n.appLoading=!1,t()},300)}).catch(function(t){setTimeout(function(){n.appLoading=!1,n.errorSnackbar={state:!0,text:t.message}},300)})})},getCustomers:function(t,e){var n=t.commit,a=(t.state,t.rootState);return a.appLoading=!0,console.log(e),new o.a(function(t,o){a.socketClass.myEmit("getCustomers",e).then(function(e){setTimeout(function(){a.appLoading=!1,n("setcustomers",e),t(e.customers)},300)}).catch(function(t){setTimeout(function(){a.appLoading=!1,a.errorSnackbar={state:!0,text:t.message}},300)})})},putCustomer:function(t,e){var n=(t.commit,t.state,t.rootState);return n.appLoading=!0,new o.a(function(t,a){n.socketClass.myEmit("putCustomer",e).then(function(e){setTimeout(function(){n.appLoading=!1,t()},300)}).catch(function(t){setTimeout(function(){n.appLoading=!1,n.errorSnackbar={state:!0,text:t.message}},300)})})},deleteCustomer:function(t,e){var n=(t.commit,t.state,t.rootState);return n.appLoading=!0,new o.a(function(t,a){n.socketClass.myEmit("deleteCustomer",e).then(function(e){setTimeout(function(){n.appLoading=!1,t()},300)}).catch(function(t){setTimeout(function(){n.appLoading=!1,n.errorSnackbar={state:!0,text:t.message}},300)})})}},i={},u={state:s,mutations:r,actions:c,getters:i};e.a=u},85:function(t,e,n){"use strict";var a={loginType:0},o={toWechat:function(t){t.loginType=1},toAccount:function(t){t.loginType=0}},s={wechatLogin:function(t){var e=t.commit;t.state,t.rootState;e("toWechat")},accountLogin:function(t){var e=t.commit;t.state,t.rootState;e("toAccount")}},r={},c={state:a,mutations:o,actions:s,getters:r};e.a=c},86:function(t,e,n){"use strict";(function(t){var a=n(5),o=n.n(a),s=n(39),r=n.n(s),c=n(11),i=n.n(c),u=n(10),l=n.n(u),p=n(74),f=n.n(p),m={referenceFileList:[],uploadFileList:[],clientOption:{region:"oss-cn-hangzhou",accessKeyId:"",accessKeySecret:"",stsToken:"",bucket:"tujing"},callbackUrl:"47.97.215.115/",client:{},readClient:{}},d={setStsToken:function(t,e){console.log(e),t.clientOption.accessKeyId=e.credentials.AccessKeyId,t.clientOption.accessKeySecret=e.credentials.AccessKeySecret,t.clientOption.stsToken=e.credentials.SecurityToken,t.client=new f.a.Wrapper(t.clientOption),console.log(t.client)},setReadClient:function(t,e){t.clientOption.accessKeyId=e.credentials.AccessKeyId,t.clientOption.accessKeySecret=e.credentials.AccessKeySecret,t.clientOption.stsToken=e.credentials.SecurityToken,t.readClient=new f.a.Wrapper(t.clientOption)},setProgress:function(t,e){var n=t.uploadFileList[e.index];n.progress=e.p,t.uploadFileList.splice(e.index,1,n)},removeUploadFile:function(t,e){t.uploadFileList.splice(e,1)}},g={getAllWriteAndReadProjectStsToken:function(t,e){var n=this,a=t.commit,o=(t.state,t.rootState);return l()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.socketClass.myEmit("getAllWriteAndReadProjectStsToken",{});case 3:e=t.sent,a("setReadClient",e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),o.errorSnackbar={state:!0,text:t.t0.message};case 10:case"end":return t.stop()}},t,n,[[0,7]])}))()},getWriteAndReadProjectStsToken:function(t,e){var n=this,a=t.commit,o=(t.state,t.rootState);return l()(i.a.mark(function t(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.socketClass.myEmit("getWriteAndReadProjectStsToken",{pid:e.pid});case 3:s=t.sent,a("setStsToken",s),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),o.errorSnackbar={state:!0,text:t.t0.message};case 10:case"end":return t.stop()}},t,n,[[0,7]])}))()},getWriteAccountStsToken:function(t){var e=this,n=t.commit,a=(t.state,t.rootState);return l()(i.a.mark(function t(){var o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.socketClass.myEmit("getWriteAccountStsToken",{});case 3:o=t.sent,n("setStsToken",o),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a.errorSnackbar={state:!0,text:t.t0.message};case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},uploadFile:function(e,n){var a=this,o=(e.commit,e.state),s=e.rootState;return l()(i.a.mark(function e(){var c,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={callbackUrl:""+o.callbackUrl+n.callbackUrl,callbackHost:o.clientOption.bucket+"."+o.clientOption.region+".aliyuncs.com",callbackBody:"bucket=${bucket}&object=${object}&etag=${etag}&size=${size}&mimeType=${mimeType}&var1=${x:var1}&var2=${x:var2}",callbackBodyType:"application/json"},c=new t(r()(c)),c=c.toString("base64"),e.next=6,o.client.multipartUpload(n.objectKey,n.buf.file,{progress:i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.buf.progress=e;case 1:case"end":return t.stop()}},t,this)}),headers:{"x-oss-callback":c}});case 6:return u=e.sent,n.buf.state=2,e.abrupt("return",u);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),s.errorSnackbar={state:!0,text:e.t0.message};case 15:case"end":return e.stop()}},e,a,[[0,11]])}))()},uploadprojectFile:function(e,n){var a=this,o=(e.commit,e.state),s=e.rootState;return l()(i.a.mark(function e(){var c,u,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={callbackUrl:""+o.callbackUrl+n.callbackUrl,callbackHost:o.clientOption.bucket+"."+o.clientOption.region+".aliyuncs.com",callbackBody:"bucket=${bucket}&object=${object}&etag=${etag}&size=${size}&mimeType=${mimeType}&pid=${x:pid}&iid=${x:iid}",callbackBodyType:"application/json"},c=new t(r()(c)),c=c.toString("base64"),u={"x:pid":n.pid,"x:iid":n.iid},u=new t(r()(u)),u=u.toString("base64"),e.next=9,o.client.multipartUpload(n.objectKey,n.buf.file,{progress:i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.buf.progress=e;case 1:case"end":return t.stop()}},t,this)}),headers:{"x-oss-callback":c,"x-oss-callback-var":u}});case 9:return l=e.sent,e.abrupt("return",l);case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),s.errorSnackbar={state:!0,text:e.t0.message};case 17:case"end":return e.stop()}},e,a,[[0,13]])}))()},deleteRefFile:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return l()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("deleteRefFile",{pid:e.pid,name:e.name});case 4:a.appLoading=!1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 11:case"end":return t.stop()}},t,n,[[0,7]])}))()},deleteModFile:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return l()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("deleteModFile",{pid:e.pid,name:e.name});case 4:return a.appLoading=!1,t.abrupt("return",!0);case 8:return t.prev=8,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message},t.abrupt("return",!1);case 13:case"end":return t.stop()}},t,n,[[0,8]])}))()},getReadAccountStsTokenBoss:function(t,e){var n=t.commit,a=(t.state,t.rootState);return new o.a(function(t,o){a.socketClass.myEmit("getReadAccountStsTokenBoss",e._id).then(function(e){n("setStsToken",e),t()}).catch(function(t){o(t)})})}},v={},h={state:m,mutations:d,actions:g,getters:v};e.a=h}).call(e,n(40).Buffer)},87:function(t,e,n){"use strict";var a=n(11),o=n.n(a),s=n(10),r=n.n(s),c=n(39),i=n.n(c),u=n(24),l=(n.n(u),{pid:{},listData:[],listCount:0,changeData:{},voucher:{bucket:"",name:"",object:""},currentPage:1,work:{currentPage:1}}),p={setChangeProject:function(t,e){t.changeData=e},setChangeProjectImage:function(t,e){t.changeData.image=e.image},setPid:function(t,e){t.pid=e},setProjectList:function(t,e){t.listData=e.projects,t.listCount=e.count},deleteProjectList:function(t,e){t.listData},addImage:function(t,e){var n={};for(var a in e)n[a]=e[a];t.changeData.image.push(n)},reImage:function(t,e){l.changeData.image.splice(e,1)},removeChangeDate:function(t,e){l.changeData={}}},f={isChangeProject:function(t,e){var n=(t.commit,t.state),a=t.rootState;return i()(n.changeData)!==i()(n.oldChangeData)||(a.router.replace({name:e}),!1)},postProject:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("postProject",{name:e.name,publisherId:e.publisherId,uid:a.user._id});case 4:s=t.sent,a.appLoading=!1,a.router.replace({name:"project",params:{pid:s}}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 13:case"end":return t.stop()}},t,n,[[0,9]])}))()},putProject:function(t){var e=this,n=t.commit,a=t.state,s=t.rootState;return r()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s.appLoading=!0,console.log(a.changeData),t.next=5,s.socketClass.myEmit("putProject",a.changeData);case 5:r=t.sent,n("setChangeProject",a.changeData),s.appLoading=!1,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),s.appLoading=!1,s.errorSnackbar={state:!0,text:t.t0.message};case 14:case"end":return t.stop()}},t,e,[[0,10]])}))()},getProject:function(t,e){var n=this,a=t.commit,s=(t.state,t.rootState);return r()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s.appLoading=!0,t.next=4,s.socketClass.myEmit("getProject",{pid:e});case 4:r=t.sent,a("setChangeProject",r),s.appLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),s.appLoading=!1,s.errorSnackbar={state:!0,text:t.t0.message};case 13:case"end":return t.stop()}},t,n,[[0,9]])}))()},getProjects:function(t,e){var n=this,a=t.commit,s=(t.state,t.rootState);return r()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s.appLoading=!0,t.next=4,s.socketClass.myEmit("getProjects",{uid:s.user._id,state:e.state,currentPage:e.currentPage,pageSize:e.pageSize});case 4:r=t.sent,a("setProjectList",r),s.appLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),s.appLoading=!1,s.errorSnackbar={state:!0,text:t.t0.message};case 13:case"end":return t.stop()}},t,n,[[0,9]])}))()},getRenderProjects:function(t,e){var n=this,a=t.commit,s=(t.state,t.rootState);return r()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s.appLoading=!0,t.next=4,s.socketClass.myEmit("getRenderProjects",{uid:s.user._id,state:e.state,currentPage:e.currentPage,pageSize:e.pageSize});case 4:r=t.sent,a("setProjectList",r),s.appLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),s.appLoading=!1,s.errorSnackbar={state:!0,text:t.t0.message};case 13:case"end":return t.stop()}},t,n,[[0,9]])}))()},deleteProject:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("deleteProjectById",{pid:e});case 4:a.appLoading=!1,a.successSnackbar={state:!0,text:"删除成功"},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 12:case"end":return t.stop()}},t,n,[[0,8]])}))()},editProject:function(t,e){t.commit,t.state;t.rootState.router.replace({name:"project",params:{pid:e}})},postProImage:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("postProImage",{pid:e.pid,iid:e.iid,image:e.image});case 4:a.appLoading=!1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 11:case"end":return t.stop()}},t,n,[[0,7]])}))()},putProImage:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("putProImage",{pid:e.pid,iid:e.iid,image:e.image});case 4:a.appLoading=!1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 11:case"end":return t.stop()}},t,n,[[0,7]])}))()},putProImageFinish:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("putProImageFinish",{pid:e.pid,image:e.image});case 4:a.appLoading=!1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 11:case"end":return t.stop()}},t,n,[[0,7]])}))()},deleteProImage:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("deleteProImage",{pid:e.pid,iid:e.iid});case 4:a.appLoading=!1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 11:case"end":return t.stop()}},t,n,[[0,7]])}))()},getProImage:function(t,e){var n=this,a=t.commit,s=(t.state,t.rootState);return r()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s.appLoading=!0,t.next=4,s.socketClass.myEmit("getProject",{pid:e});case 4:r=t.sent,a("setChangeProjectImage",r),s.appLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),s.appLoading=!1,s.errorSnackbar={state:!0,text:t.t0.message};case 13:case"end":return t.stop()}},t,n,[[0,9]])}))()},putProImgMod:function(t,e){var n=this,a=(t.commit,t.stata,t.rootState);return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,console.log(e),t.next=5,a.socketClass.myEmit("putProImgMod",{model:e.model,pid:e.pid,iid:e.iid});case 5:a.appLoading=!1,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 12:case"end":return t.stop()}},t,n,[[0,8]])}))()},putProImgArrange:function(t,e){var n=this,a=(t.commit,t.state,t.rootState);return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("putProImgArrange",{workType:e.workType,pid:e.pid,iid:e.iid,uid:e.uid});case 4:a.appLoading=!1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 11:case"end":return t.stop()}},t,n,[[0,7]])}))()},projectPay:function(t,e){var n=this,a=(t.commit,t.stata,t.rootState);return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.appLoading=!0,t.next=4,a.socketClass.myEmit("projectPay",{pid:e.pid,image:e.image,money:e.money,voucher:e.voucher});case 4:s=t.sent,console.log(s),a.appLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),a.appLoading=!1,a.errorSnackbar={state:!0,text:t.t0.message};case 13:case"end":return t.stop()}},t,n,[[0,9]])}))()}},m={},d={state:l,mutations:p,actions:f,getters:m};e.a=d},88:function(t,e,n){"use strict";var a=n(5),o=n.n(a),s={_id:"",token:"",nickname:"",sex:"",headimgurl:"",province:"",city:"",country:"",contactInformation:{QQ:"",wechat:""},realInformation:{state:0,name:""},notify:[],notifyNumber:0,notifyType:"",loading:!0,isRemember:!1},r={setUser:function(t,e){console.log(e);for(var n in e)t[n]=e[n];t.notifyNumber=0;for(var a=0;a<t.notify.length;a++)0==t.notify[a].state&&t.notifyNumber++},setNotify:function(t,e){t.notify=e,t.notifyNumber=0;for(var n=0;n<e.length;n++)0==e[n].state&&t.notifyNumber++}},c={signOut:function(t){var e=(t.commit,t.state);t.rootState;localStorage.removeItem("accessToken"),e._id=""},loginSuccess:function(t){var e=t.commit,n=(t.state,t.rootState);n.socketClass.socket.on("loginSuccess",function(t){n.socketClass.socket.emit("authentication",t.accessToken),n.loginDialog=!1,e("setUser",t)})},authenticationSuccess:function(t){var e=t.commit;t.state;t.rootState.socketClass.socket.on("authenticationSuccess",function(t){localStorage.setItem("accessToken",t.accessToken),e("setUser",t)})},appError:function(t){var e=(t.commit,t.state,t.rootState);e.socketClass.socket.on("appError",function(t){e.errorSnackbar={state:!0,text:t}})},notify:function(t){var e=t.commit,n=(t.state,t.rootState);n.socketClass.socket.on("notify",function(){n.socketClass.myEmit("getNotify",{notifyType:0,currentPage:1}).then(function(t){e("setNotify",t),n.infoSnackbar={state:!0,text:"您有新的通知"}}).catch(function(t){console.log(t)})})},getNotify:function(t,e){var n=t.commit,a=(t.state,t.rootState);return new o.a(function(t,o){a.socketClass.myEmit("getNotify",{notifyType:e.notifyType,currentPage:e.currentPage}).then(function(e){n("setNotify",e),t()}).catch(function(t){console.log(t)})})},getNotifyReturn:function(t,e){var n=(t.commit,t.state,t.rootState);return new o.a(function(t,a){n.appLoading=!0,n.socketClass.myEmit("getNotify",{notifyType:e.notifyType,currentPage:e.currentPage}).then(function(e){n.appLoading=!1,t(e)}).catch(function(t){a(t),n.appLoading=!1})})},putNotify:function(t,e){var n=(t.commit,t.state,t.rootState);return new o.a(function(t,a){n.socketClass.myEmit("putNotify",{_id:e._id}).then(function(e){t()})})},deleteNotify:function(t,e){var n=(t.commit,t.state,t.rootState);return new o.a(function(t,a){n.socketClass.myEmit("deleteNotify",{_id:e._id}).then(function(e){t()})})}},i={},u={state:s,mutations:r,actions:c,getters:i};e.a=u}},[79]);
//# sourceMappingURL=app.88262af1856c67ee6349.js.map