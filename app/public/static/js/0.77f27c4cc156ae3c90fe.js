webpackJsonp([0],{178:function(e,t,a){function i(e){a(261)}var n=a(25)(a(221),a(289),i,"data-v-6f4ca5f8",null);e.exports=n.exports},188:function(e,t,a){e.exports={default:a(190),__esModule:!0}},189:function(e,t,a){e.exports=a.p+"static/img/file.05a6c4d.png"},190:function(e,t,a){a(72),a(71),e.exports=a(191)},191:function(e,t,a){var i=a(6),n=a(70);e.exports=a(4).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},192:function(e,t,a){e.exports=a.p+"static/img/22.4539d19.png"},193:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(188),n=a.n(i),s=a(11),r=a.n(s),o=a(10),l=a.n(o);t.default={name:"fileEdir",components:{},props:["pid","fileList"],data:function(){return{fileIcon:a(189),value:0,uploadFileList:[]}},computed:{user:function(){return this.$store.state.user},ossFile:function(){return this.$store.state.ossFile.client},newFileList:function(){for(var e in this.fileList)if(this.fileList[e].name&&!this.fileList[e].src){var t=this.fileList[e].name.substring(this.fileList[e].name.lastIndexOf(".")+1);"jpeg"!==t&&"png"!==t&&"gif"!==t&&"bmp"!==t&&"jpg"!==t||(this.fileList[e].src=this.$store.state.ossFile.client.signatureUrl(this.fileList[e].object,{expires:600,process:"image/resize,w_185"}))}return this.fileList}},methods:{fileChange:function(){var e=this;return l()(r.a.mark(function t(){var a,i,s,o,c,p,d,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=function(t){var a={state:1,progress:0,src:"",file:t},i=!1,s=!0,o=!1,c=void 0;try{for(var p,d=n()(e.fileList);!(s=(p=d.next()).done);s=!0){var u=p.value;if(t.name===u.name){i=!0;break}}}catch(e){o=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(o)throw c}}if(i)return"continue";if("image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type||"image/bmp"===t.type||"image/jpg"===t.type){var f=new FileReader;f.onloadend=function(){var t=l()(r.a.mark(function t(i){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.src=i.target.result;case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),f.readAsDataURL(t)}e.fileList.push(a),console.log(11),e.$store.dispatch("uploadprojectFile",{callbackUrl:"osscallback/refFileUpload",objectKey:"temporaryFile/project/"+e.pid+"/reference/"+a.file.name,buf:a,pid:e.pid}).then(function(t){for(var a in e.fileList)e.fileList[a].file&&e.fileList[a].file.name===t.data.name&&e.fileList.splice(a,1,t.data)}).catch(function(e){console.log(e),a.state=2})},i=!0,s=!1,o=void 0,t.prev=4,c=n()(e.$refs.file.files);case 6:if(i=(p=c.next()).done){t.next=14;break}if(d=p.value,"continue"!==(u=a(d))){t.next=11;break}return t.abrupt("continue",11);case 11:i=!0,t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),s=!0,o=t.t0;case 20:t.prev=20,t.prev=21,!i&&c.return&&c.return();case 23:if(t.prev=23,!s){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}},t,e,[[4,16,20,28],[21,,23,27]])}))()},openFile:function(){this.$refs.file.click()},deleteRefFile:function(e){var t=this;return l()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("deleteRefFile",{pid:t.pid,name:e});case 2:a.t0=r.a.keys(t.fileList);case 3:if((a.t1=a.t0()).done){a.next=10;break}if(i=a.t1.value,t.fileList[i].name===e){a.next=7;break}return a.abrupt("continue",3);case 7:t.fileList.splice(i,1),a.next=3;break;case 10:case"end":return a.stop()}},a,t)}))()},downRefFile:function(e,t){var a=this.$store.state.ossFile.client.signatureUrl(e);window.open(a,"_blank")}},mounted:function(){},beforeCreate:function(){}}},194:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(11),n=a.n(i),s=a(188),r=a.n(s),o=a(10),l=a.n(o);t.default={name:"payfile",components:{},props:["pid","image"],data:function(){return{fileIcon:a(189),noImage:a(192),picture:this.image.picture?this.$store.state.ossFile.client.signatureUrl(this.image.picture.object,{expires:600,process:"image/resize,w_132"}):null,isHover:!1,isHoverOne:!1,nowfile:{state:0,validate:!0},voucher:{},rules:{space:[function(e){return!!e||"请选择设计空间"}],area:[function(e){return!!e||"请选择空间区域"}],price:[function(e){return/^[0-9]+$/.test(e)||"价格必须为数字,且不能为空"}],style:[function(e){return!!e||"请选择设计风格"}],designType:[function(e){return!!e||"请选择设计类型"}],imageType:[function(e){return!!e||"请选择图片类型"}]}}},computed:{ossFile:function(){return this.$store.state.ossFile.client},user:function(){return this.$store.state.user}},methods:{enter:function(){this.isHover=!0},leave:function(){this.isHover=!1},enterOne:function(){this.isHoverOne=!0},leaveOne:function(){this.isHoverOne=!1},fileChange:function(){var e=this;return l()(n.a.mark(function t(){var a,i,s,o,c,p;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=!0,i=!1,s=void 0,t.prev=3,o=r()(e.$refs.payfile.files);case 5:if(a=(c=o.next()).done){t.next=12;break}if(p=c.value,"image/jpeg"!==p.type&&"image/png"!==p.type&&"image/gif"!==p.type&&"image/bmp"!==p.type&&"image/jpg"!==p.type){t.next=9;break}return t.delegateYield(n.a.mark(function t(){var a,i,s,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={state:1,progress:0,src:"",file:p,validate:!0},i=new FileReader,i.onloadend=function(){var t=l()(n.a.mark(function t(i){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.src=i.target.result;case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),i.readAsDataURL(p),e.nowfile=a,s=a.file.name,t.next=8,e.$store.dispatch("uploadprojectFile",{callbackUrl:"osscallback/picFileUpload",objectKey:"temporaryFile/project/"+e.pid+"/picture/"+Number(Math.random().toString().substr(3,6)+Date.now()).toString(36)+"."+s.substring(s.lastIndexOf(".")+1),buf:a,pid:e.pid,iid:e.image._id});case 8:r=t.sent,e.voucher=r.data,a.state=2,console.log(e.voucher);case 12:case"end":return t.stop()}},t,e)})(),"t0",9);case 9:a=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t1=t.catch(3),i=!0,s=t.t1;case 18:t.prev=18,t.prev=19,!a&&o.return&&o.return();case 21:if(t.prev=21,!i){t.next=24;break}throw s;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,e,[[3,14,18,26],[19,,21,25]])}))()},openFile:function(){this.$refs.payfile.click()},close:function(){this.nowfile.state=0,this.nowfile.validate=!0,this.$refs.proPayForm.reset(),this.$refs.payfile.value="",this.$emit("close")},test:function(){console.log(1)},downRefFile:function(e,t){var a=this.$store.state.ossFile.client.signatureUrl(e);window.open(a,"_blank")}},mounted:function(){},beforeCreate:function(){}}},195:function(e,t,a){t=e.exports=a(161)(!0),t.push([e.i,".payfile[data-v-115a80ff]{display:-webkit-box;display:-ms-flexbox;display:flex}.lengthLimit[data-v-115a80ff]{white-space:nowrap;display:inline-block;overflow:hidden;width:142px;text-overflow:ellipsis}.big[data-v-115a80ff]{padding-top:8px;padding-left:8px}.my-btn[data-v-115a80ff]{margin:0 0 0 2px;min-width:0;height:20px}","",{version:3,sources:["E:/program/tujingwang1/program/src/components/file/upload.vue"],names:[],mappings:"AACA,0BACI,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,8BACI,mBAAoB,AACpB,qBAAsB,AACtB,gBAAiB,AACjB,YAAa,AACb,sBAAwB,CAC3B,AACD,sBACI,gBAAiB,AACjB,gBAAkB,CACrB,AACD,yBACI,iBAAiB,AAIjB,YAAe,AACf,WAAa,CAChB",file:"upload.vue",sourcesContent:["\n.payfile[data-v-115a80ff] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.lengthLimit[data-v-115a80ff] {\n    white-space: nowrap;\n    display: inline-block;\n    overflow: hidden;\n    width: 142px;\n    text-overflow: ellipsis;\n}\n.big[data-v-115a80ff] {\n    padding-top: 8px;\n    padding-left: 8px;\n}\n.my-btn[data-v-115a80ff] {\n    margin-left: 2px;\n    margin-right: 0px;\n    margin-top: 0px;\n    margin-bottom: 0px;\n    min-width: 0px;\n    height: 20px;\n}\n\n\n\n"],sourceRoot:""}])},196:function(e,t,a){t=e.exports=a(161)(!0),t.push([e.i,".fileEdir[data-v-3d4e7678]{display:-webkit-box;display:-ms-flexbox;display:flex}.lengthLimit[data-v-3d4e7678]{white-space:nowrap;display:inline-block;overflow:hidden;width:142px;text-overflow:ellipsis}.big[data-v-3d4e7678]{padding-top:8px;padding-left:8px}","",{version:3,sources:["E:/program/tujingwang1/program/src/components/file/index.vue"],names:[],mappings:"AACA,2BAUI,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CAQjB,AACD,8BACI,mBAAoB,AACpB,qBAAsB,AACtB,gBAAiB,AACjB,YAAa,AACb,sBAAwB,CAC3B,AACD,sBACI,gBAAiB,AACjB,gBAAkB,CACrB",file:"index.vue",sourcesContent:["\n.fileEdir[data-v-3d4e7678] {\n    /* width:100%;\n    height:50px;\n    padding: 10px;\n    padding-top: 70px;\n    overflow:auto;\n    position: absolute; */\n    /* margin: auto; */\n    /* padding-top: 50px;\n    min-width: 1080px; */\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    /* width: 1300px; */\n    /* background-color: #fff; */\n    /* background-position:center;  */\n    /* max-width: 1220px; */\n    /* min-width: 965px;\n    background-color: #fff;\n    z-index:1; */\n}\n.lengthLimit[data-v-3d4e7678] {\n    white-space: nowrap;\n    display: inline-block;\n    overflow: hidden;\n    width: 142px;\n    text-overflow: ellipsis;\n}\n.big[data-v-3d4e7678] {\n    padding-top: 8px;\n    padding-left: 8px;\n}\n\n\n\n"],sourceRoot:""}])},197:function(e,t,a){var i=a(195);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(162)("57b85202",i,!0,{})},198:function(e,t,a){var i=a(196);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(162)("2a249f26",i,!0,{})},200:function(e,t,a){function i(e){a(198)}var n=a(25)(a(193),a(203),i,"data-v-3d4e7678",null);e.exports=n.exports},201:function(e,t,a){function i(e){a(197)}var n=a(25)(a(194),a(202),i,"data-v-115a80ff",null);e.exports=n.exports},202:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"payfile"},[a("v-layout",{attrs:{wrap:""}},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"payfile",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"yFile"},on:{change:function(t){e.fileChange()}}}),e._v(" "),e.image.picture&&e.nowfile.state<1?a("v-flex",{attrs:{xs12:""}},[a("v-card",{on:{mouseenter:e.enter,mouseleave:e.leave}},[a("v-card-media",{staticStyle:{width:"131.5px"},attrs:{src:e.picture,height:"131.5px"}},[a("transition",{attrs:{name:"fade"}},[e.isHover?a("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[this.user.realInformation.name===e.image.renderName?a("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(t){e.openFile()}}},[a("span",{staticClass:" caption"},[e._v("更换")])]):e._e(),e._v(" "),a("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(t){e.downRefFile(e.image.picture.object,e.image.picture.name)}}},[a("span",{staticClass:" caption"},[e._v("下载")])])],1):e._e()])],1)],1)],1):1===e.nowfile.state?a("v-flex",{attrs:{xs12:""}},[a("v-card",{staticStyle:{width:"100%"}},[a("v-card-media",{staticStyle:{width:"131.5px"},attrs:{src:e.nowfile.src,height:"131.5px"}},[a("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[a("v-progress-circular",{attrs:{size:100,width:15,rotate:270,value:100*e.nowfile.progress,color:"yellow"}},[e._v("\n                            "+e._s(100*e.nowfile.progress)+"%\n                        ")])],1)])],1)],1):2===e.nowfile.state?a("v-flex",{attrs:{xs12:""}},[a("v-card",{staticStyle:{width:"100%"},on:{mouseenter:e.enterOne,mouseleave:e.leaveOne}},[a("v-card-media",{staticStyle:{width:"131.5px"},attrs:{src:e.nowfile.src,height:"131.5px"}},[a("transition",{attrs:{name:"fade"}},[e.isHoverOne?a("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[this.user.realInformation.name===e.image.renderName?a("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(t){e.openFile()}}},[a("span",{staticClass:" caption"},[e._v("更换")])]):e._e(),e._v(" "),a("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(t){e.downRefFile(e.voucher.object,e.voucher.name)}}},[a("span",{staticClass:" caption"},[e._v("下载")])])],1):e._e()])],1)],1)],1):a("v-flex",{attrs:{xs12:""}},[a("v-card",{staticStyle:{width:"100%"},on:{mouseenter:e.enter,mouseleave:e.leave}},[a("v-card-media",{staticStyle:{width:"131.5px"},attrs:{src:e.noImage,height:"131.5px"},on:{mouseenter:e.enter,mouseleave:e.leave}},[a("transition",{attrs:{name:"fade"}},[e.isHover&&this.user.realInformation.name===e.image.renderName&&1===e.image.isFinish?a("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[a("v-btn",{staticClass:"my-btn",attrs:{small:"",color:"grey"},on:{click:function(t){e.openFile()}}},[a("span",{staticClass:" caption"},[e._v("上传")])])],1):e._e()])],1)],1)],1)],1)],1)},staticRenderFns:[]}},203:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fileEdir"},[a("v-layout",{attrs:{wrap:""}},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"xFile",multiple:""},on:{change:function(t){e.fileChange()}}}),e._v(" "),-1!==e.user.authority.indexOf("service")?a("v-flex",{attrs:{xs2:""}},[a("v-btn",{staticStyle:{height:"217px",width:"100%",padding:"0px",margin:"0px"},attrs:{depressed:""},on:{click:e.openFile}},[a("v-flex",{attrs:{xs12:""}},[a("div",{staticStyle:{margin:"8px",display:"flex","justify-content":"center","align-items":"center"}},[a("v-icon",{attrs:{color:"grey"}},[e._v("add")])],1),e._v(" "),a("div",{staticStyle:{margin:"8px",display:"flex","justify-content":"center","align-items":"center"}},[a("span",{staticClass:"grey--text caption"},[e._v("点击添加文件")])])])],1)],1):e._e(),e._v(" "),e._l(e.newFileList,function(t,i){return 2!==t.state?a("v-flex",{key:i,attrs:{xs2:""}},[t.state?a("v-card",[a("v-card-media",{attrs:{src:t.src?t.src:e.fileIcon,height:"185px"}},[a("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[a("v-progress-circular",{attrs:{size:100,width:15,rotate:270,value:100*t.progress,color:"yellow"}},[e._v("\n                            "+e._s(100*t.progress)+"%\n                        ")]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"title white--text"},[e._v("\n                            "+e._s(t.file.name.substring(t.file.name.lastIndexOf(".")+1))+"\n                        ")])],1)]),e._v(" "),a("v-container",{staticStyle:{padding:"8px"},attrs:{"fill-height":"",fluid:""}},[a("v-layout",[a("v-flex",{staticStyle:{"padding-top":"8px","padding-bottom":"0px"},attrs:{xs10:"","align-end":"",flexbox:""}},[a("span",{staticClass:"lengthLimit"},[e._v(e._s(t.file.name))])]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-layout",{attrs:{"justify-end":"","fill-height":""}})],1)],1)],1)],1):a("v-card",{attrs:{flat:""}},[a("v-card-media",{attrs:{src:t.src?t.src:e.fileIcon,height:"185px"}},[t.src?e._e():a("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[a("br"),e._v(" "),a("span",{staticClass:"title white--text"},[e._v("\n                            "+e._s(t.name.substring(t.name.lastIndexOf(".")+1))+"\n                        ")])])]),e._v(" "),a("v-container",{staticStyle:{padding:"8px"},attrs:{"fill-height":"",fluid:""}},[a("v-layout",[a("v-flex",{staticStyle:{"padding-top":"8px","padding-bottom":"0px"},attrs:{xs10:"","align-end":"",flexbox:""}},[a("span",{staticClass:"lengthLimit"},[e._v(e._s(t.name))])]),e._v(" "),a("v-menu",{attrs:{"offset-y":""}},[a("v-btn",{staticStyle:{margin:"0px","margin-right":"4px"},attrs:{slot:"activator",icon:"",small:"",light:"",dark:""},slot:"activator"},[a("v-icon",{attrs:{color:"grey darken-2"}},[e._v("more_vert")])],1),e._v(" "),a("v-list",[-1!==e.user.authority.indexOf("service")?a("v-list-tile",{on:{click:function(a){e.deleteRefFile(t.name)}}},[a("v-list-tile-title",{staticClass:"body-1"},[e._v("删除")])],1):e._e(),e._v(" "),a("v-list-tile",{on:{click:function(a){e.downRefFile(t.object,t.name)}}},[a("v-list-tile-title",{staticClass:"body-1"},[e._v("下载")])],1)],1)],1)],1)],1)],1)],1):e._e()})],2)],1)},staticRenderFns:[]}},219:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(11),n=a.n(i),s=a(188),r=a.n(s),o=a(10),l=a.n(o);t.default={name:"payfile",components:{},props:["pid","image"],data:function(){return{fileIcon:a(189),value:0,nowfile:{state:0,validate:!0},voucher:{},proPayValid:!1,price:"",rules:{space:[function(e){return!!e||"请选择设计空间"}],area:[function(e){return!!e||"请选择空间区域"}],price:[function(e){return/^[0-9]+$/.test(e)||"价格必须为数字,且不能为空"}],style:[function(e){return!!e||"请选择设计风格"}],designType:[function(e){return!!e||"请选择设计类型"}],imageType:[function(e){return!!e||"请选择图片类型"}]}}},computed:{ossFile:function(){return this.$store.state.ossFile.client}},methods:{fileChange:function(){var e=this;return l()(n.a.mark(function t(){var a,i,s,o,c,p;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=!0,i=!1,s=void 0,t.prev=3,o=r()(e.$refs.payfile.files);case 5:if(a=(c=o.next()).done){t.next=12;break}if(p=c.value,"image/jpeg"!==p.type&&"image/png"!==p.type&&"image/gif"!==p.type&&"image/bmp"!==p.type&&"image/jpg"!==p.type){t.next=9;break}return t.delegateYield(n.a.mark(function t(){var a,i,s,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={state:1,progress:0,src:"",file:p,validate:!0},i=new FileReader,i.onloadend=function(){var t=l()(n.a.mark(function t(i){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.src=i.target.result;case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),i.readAsDataURL(p),e.nowfile=a,s=a.file.name,t.next=8,e.$store.dispatch("uploadFile",{callbackUrl:"osscallback",objectKey:"temporaryFile/payment/"+Number(Math.random().toString().substr(3,6)+Date.now()).toString(36)+"."+s.substring(s.lastIndexOf(".")+1),buf:a});case 8:r=t.sent,e.voucher=r.data,console.log(e.voucher);case 11:case"end":return t.stop()}},t,e)})(),"t0",9);case 9:a=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t1=t.catch(3),i=!0,s=t.t1;case 18:t.prev=18,t.prev=19,!a&&o.return&&o.return();case 21:if(t.prev=21,!i){t.next=24;break}throw s;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,e,[[3,14,18,26],[19,,21,25]])}))()},openFile:function(){this.$refs.payfile.click()},close:function(){this.nowfile.state=0,this.nowfile.validate=!0,this.$refs.proPayForm.reset(),this.$refs.payfile.value="",this.$emit("close")},submit:function(){var e=this;return l()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.$refs.proPayForm.validate(),e.nowfile.validate=2===e.nowfile.state,a&&e.nowfile.validate){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.$store.dispatch("projectPay",{pid:e.pid,image:e.image,money:e.price,voucher:e.voucher});case 6:return t.next=8,e.$store.dispatch("getProImage",e.pid);case 8:e.close();case 9:case"end":return t.stop()}},t,e)}))()},deleteRefFile:function(e){var t=this;return l()(n.a.mark(function a(){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("deleteRefFile",{pid:t.pid,name:e});case 2:a.t0=n.a.keys(t.fileList);case 3:if((a.t1=a.t0()).done){a.next=10;break}if(i=a.t1.value,t.fileList[i].name===e){a.next=7;break}return a.abrupt("continue",3);case 7:t.fileList.splice(i,1),a.next=3;break;case 10:case"end":return a.stop()}},a,t)}))()},downRefFile:function(e,t){var a=this.$store.state.ossFile.client.signatureUrl(e);window.open(a,"_blank")}},mounted:function(){},beforeCreate:function(){}}},221:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(39),n=a.n(i),s=a(11),r=a.n(s),o=a(10),l=a.n(o),c=a(200),p=a.n(c),d=a(275),u=a.n(d),f=a(201),v=a.n(f);t.default={name:"project",components:{file:p.a,payfilm:u.a,upload:v.a},props:[],data:function(){return{loading:!1,noImage:a(192),projectName:this.$route.params.pid,imageDialog:!1,imageValid:!1,modifyDialog:!1,modifyDialogPrice:!1,modifyValid:!1,modifyImage:{style:"",designType:"",space:"",area:"",imageType:""},proPayDialog:!1,proPayValid:!1,proPayImage:{},arrangeDialog:!1,arrangeValid:!1,arrangeImage:{},workType:"",saveDialog:!1,designTypeItems:[{text:"家装",value:"家装"},{text:"工装",value:"工装"}],homeDesignItems:[{text:"平层",value:"平层"},{text:"跃层",value:"跃层"},{text:"排屋",value:"排屋"},{text:"别墅",value:"别墅"}],homeSpaceItems:[{text:"客厅",value:"客厅"},{text:"餐厅",value:"餐厅"},{text:"厨房",value:"厨房"},{text:"卧室",value:"卧室"},{text:"书房",value:"书房"},{text:"阳台",value:"阳台"},{text:"卫生间",value:"卫生间"},{text:"建筑外观",value:"建筑外观"},{text:"其他",value:"其他"}],workDesignItems:[{text:"公共空间",value:"公共空间"},{text:"酒店会所",value:"酒店会所"},{text:"商业展示",value:"商业展示"},{text:"餐饮娱乐",value:"餐饮娱乐"},{text:"办公会议",value:"办公会议"},{text:"休闲养生",value:"休闲养生"}],workSpaceItems:[{text:"大厅",value:"大厅"},{text:"前台",value:"前台"},{text:"过道",value:"过道"},{text:"套房",value:"套房"},{text:"包间",value:"包间"},{text:"休息区",value:"休息区"},{text:"工作区",value:"工作区"},{text:"办公室",value:"办公室"},{text:"接待室",value:"接待室"},{text:"会议室",value:"会议室"},{text:"建筑外观",value:"建筑外观"},{text:"其他",value:"其他"}],styleItems:[{text:"现代",value:"现代"},{text:"后现代",value:"后现代"},{text:"中式",value:"中式"},{text:"新中式",value:"新中式"},{text:"欧式",value:"欧式"},{text:"简欧",value:"简欧"},{text:"法式",value:"法式"},{text:"新古典",value:"新古典"},{text:"地中海",value:"地中海"},{text:"美式",value:"美式"},{text:"简美",value:"简美"},{text:"东南亚",value:"东南亚"},{text:"日式",value:"日式"},{text:"混搭",value:"混搭"}],imageTypeItems:[{text:"默认视角",value:"默认"},{text:"全景视角",value:"全景"}],image:{state:0,style:"",designType:"",space:"",area:"",imageType:"",price:""},rules:{space:[function(e){return!!e||"请选择设计空间"}],area:[function(e){return!!e||"请选择空间区域"}],price:[function(e){return/^[0-9]+$/.test(e)||"价格必须为数字,且不能为空"}],style:[function(e){return!!e||"请选择设计风格"}],designType:[function(e){return!!e||"请选择设计类型"}],imageType:[function(e){return!!e||"请选择图片类型"}]},customer:{loading:!1,items:[],select:null,idMap:[]},search:null}},watch:{search:function(e){var t=this;return l()(r.a.mark(function a(){var i,n,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:if(i=/[^\u4e00-\u9fa5]/,!i.test(e)){a.next=5;break}return a.abrupt("return");case 5:if(t.customer.items.indexOf(e)){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,t.$store.dispatch("getRender",{pageSize:50,currentPage:1,authority:"render",search:t.search});case 9:if(n=a.sent,console.log(n),0!==n.count){a.next=13;break}return a.abrupt("return");case 13:t.customer.items=[],t.customer.idMap=[];for(s in n.users)t.customer.items.push(n.users[s].realInformation.name),t.customer.idMap.push(n.users[s]._id);case 16:case"end":return a.stop()}},a,t)}))()}},computed:{project:function(){return this.$store.state.project.changeData},projects:function(){return this.$store.state.project.listData},appLoading:function(){return this.$store.state.appLoading},voucher:function(){return this.$store.state.project.voucher}},methods:{imageDialogOpen:function(){this.imageDialog=!0},imageDialogClose:function(){this.$refs.imageForm.reset(),this.imageDialog=!1},modifyImageDialogOpen:function(e){this.modifyImage=JSON.parse(n()(e)),this.modifyDialog=!0},modifyImageDialogClose:function(){this.modifyDialog=!1},modifyImageDialogPriceOpen:function(e){this.modifyImage=JSON.parse(n()(e)),this.modifyDialogPrice=!0,console.log(this.modifyDialogPrice)},modifyImageDialogPriceClose:function(){this.modifyDialogPrice=!1},proPayDialogOpen:function(e){this.proPayImage=JSON.parse(n()(e)),this.proPayDialog=!0},proPayDialogClose:function(){this.proPayDialog=!1},arrangeDialogOpen:function(e,t){this.arrangeImage=JSON.parse(n()(e)),this.workType=t,this.arrangeDialog=!0},arrangeDialogClose:function(){this.arrangeDialog=!1,this.$refs.arrangeForm.reset()},addImage:function(e){var t=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.$refs.imageForm.validate()){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,t.$store.dispatch("postProImage",{pid:t.project._id,image:e});case 4:return a.next=6,t.$store.dispatch("getProImage",t.project._id);case 6:t.imageDialogClose();case 7:case"end":return a.stop()}},a,t)}))()},deleteProImage:function(e){var t=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,t.$store.dispatch("deleteProImage",{pid:t.project._id,iid:e});case 3:return a.next=5,t.$store.dispatch("getProImage",t.project._id);case 5:case"end":return a.stop()}},a,t)}))()},putProImage:function(){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("putProImage",{pid:e.project._id,image:e.modifyImage});case 2:return t.next=4,e.$store.dispatch("getProImage",e.project._id);case 4:e.modifyImageDialogClose(),e.modifyImageDialogPriceClose();case 6:case"end":return t.stop()}},t,e)}))()},putProImageFinish:function(e){var t=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("putProImageFinish",{pid:t.project._id,image:e});case 2:return a.next=4,t.$store.dispatch("getProImage",t.project._id);case 4:case"end":return a.stop()}},a,t)}))()},putProImgArrange:function(){var e=this;return l()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.arrangeForm.validate()){t.next=2;break}return t.abrupt("return");case 2:return a=e.customer.idMap[e.customer.items.indexOf(e.customer.select)],t.next=5,e.$store.dispatch("putProImgArrange",{workType:e.workType,pid:e.project._id,iid:e.arrangeImage._id,uid:a});case 5:return t.next=7,e.$store.dispatch("getProImage",e.project._id);case 7:e.arrangeDialogClose();case 8:case"end":return t.stop()}},t,e)}))()},projectPay:function(){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("projectPay",{pid:e.project._id,image:e.proPayImage});case 2:case"end":return t.stop()}},t,e)}))()},designTypeChange:function(){this.image.space&&(this.image.space=""),this.image.area&&(this.image.area="")},createTime1:function(e){if(!e)return"无";var t=(new Date,new Date(1e3*parseInt(e.substring(0,8),16)));return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()},createTime2:function(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()},quit:function(e){this.$store.commit("removeChangeDate"),this.$router.replace({name:"projects"})},toProjects:function(){this.change("projects")},change:function(e){console.log(e),this.$router.replace({name:e})}},mounted:function(){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getWriteAndReadProjectStsToken",{pid:e.$route.params.pid});case 2:return t.next=4,e.$store.dispatch("getProject",e.$route.params.pid);case 4:case"end":return t.stop()}},t,e)}))()},beforeCreate:function(){}}},239:function(e,t,a){t=e.exports=a(161)(!0),t.push([e.i,".project[data-v-6f4ca5f8]{min-width:1280px;background-color:#f0f0f0;position:absolute;width:100%;z-index:3}.container.fluid[data-v-6f4ca5f8]{max-width:1260px}.card[data-v-6f4ca5f8]{border-radius:4px}.my-btn[data-v-6f4ca5f8]{margin:0 0 0 2px;min-width:0;height:18px}.two-btn[data-v-6f4ca5f8]{margin-left:0;margin-right:8px;min-width:0}","",{version:3,sources:["E:/program/tujingwang1/program/src/components/publish/Project.vue"],names:[],mappings:"AACA,0BAMI,iBAAkB,AAClB,yBAAqC,AACrC,kBAAmB,AAAC,WAAY,AAAC,SAAU,CAM9C,AACD,kCACI,gBAAkB,CACrB,AACD,uBAEI,iBAAmB,CAEtB,AASD,yBACI,iBAAiB,AAIjB,YAAe,AACf,WAAa,CAChB,AACD,0BACI,cAAiB,AACjB,iBAAkB,AAClB,WAAe,CAClB",file:"Project.vue",sourcesContent:["\n.project[data-v-6f4ca5f8] {\n    /* width:100%;\n    height:50px;\n    overflow:auto;\n    position: absolute; */\n    /* overflow: auto; */\n    min-width: 1280px;\n    background-color: rgb(240, 240, 240);\n    position: absolute; width: 100%; z-index:3;\n    /* background-position:center;  */\n    /* max-width: 1220px; */\n    /* min-width: 965px;\n    background-color: #fff;\n    z-index:1; */\n}\n.container.fluid[data-v-6f4ca5f8] {\n    max-width: 1260px;\n}\n.card[data-v-6f4ca5f8] {\n\n    border-radius: 4px;\n    /* box-shadow: 0 1px 5px rgba(0,0,0,0.2), 0 2px 2px rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12); */\n}\n\n    /* .card__title {\n    padding: 2px 4px 2px 4px;\n}\n.card__actions {\n    border-style:solid; border-width: 1px 0px 0px 0px; border-color: #ddd;\n    padding: 2px 0px 2px 0px;\n} */\n.my-btn[data-v-6f4ca5f8] {\n    margin-left: 2px;\n    margin-right: 0px;\n    margin-top: 0px;\n    margin-bottom: 0px;\n    min-width: 0px;\n    height: 18px;\n}\n.two-btn[data-v-6f4ca5f8] {\n    margin-left: 0px;\n    margin-right: 8px;\n    min-width: 0px;\n}\n\n\n\n\n\n"],sourceRoot:""}])},247:function(e,t,a){t=e.exports=a(161)(!0),t.push([e.i,".payfile[data-v-ec377fcc]{display:-webkit-box;display:-ms-flexbox;display:flex}.lengthLimit[data-v-ec377fcc]{white-space:nowrap;display:inline-block;overflow:hidden;width:142px;text-overflow:ellipsis}.big[data-v-ec377fcc]{padding-top:8px;padding-left:8px}","",{version:3,sources:["E:/program/tujingwang1/program/src/components/file/pay.vue"],names:[],mappings:"AACA,0BAUI,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CAQjB,AACD,8BACI,mBAAoB,AACpB,qBAAsB,AACtB,gBAAiB,AACjB,YAAa,AACb,sBAAwB,CAC3B,AACD,sBACI,gBAAiB,AACjB,gBAAkB,CACrB",file:"pay.vue",sourcesContent:["\n.payfile[data-v-ec377fcc] {\n    /* width:100%;\n    height:50px;\n    padding: 10px;\n    padding-top: 70px;\n    overflow:auto;\n    position: absolute; */\n    /* margin: auto; */\n    /* padding-top: 50px;\n    min-width: 1080px; */\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    /* width: 1300px; */\n    /* background-color: #fff; */\n    /* background-position:center;  */\n    /* max-width: 1220px; */\n    /* min-width: 965px;\n    background-color: #fff;\n    z-index:1; */\n}\n.lengthLimit[data-v-ec377fcc] {\n    white-space: nowrap;\n    display: inline-block;\n    overflow: hidden;\n    width: 142px;\n    text-overflow: ellipsis;\n}\n.big[data-v-ec377fcc] {\n    padding-top: 8px;\n    padding-left: 8px;\n}\n\n\n\n"],sourceRoot:""}])},261:function(e,t,a){var i=a(239);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(162)("109da0dd",i,!0,{})},269:function(e,t,a){var i=a(247);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(162)("45a50f6c",i,!0,{})},275:function(e,t,a){function i(e){a(269)}var n=a(25)(a(219),a(297),i,"data-v-ec377fcc",null);e.exports=n.exports},289:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project"},[a("div",{staticStyle:{"background-color":"#fff"}},[a("v-layout",{staticStyle:{height:"100%"},attrs:{"align-center":""}},[a("v-btn",{attrs:{flat:"",icon:"",color:"yellow darken-1"},on:{click:function(t){e.quit("projects")}}},[a("v-icon",[e._v("arrow_back")])],1),e._v(" "),a("v-spacer")],1)],1),e._v(" "),a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"","d-flex":""}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticStyle:{height:"100%"}},[a("v-text-field",{attrs:{label:"项目名",id:"testing",disabled:""},model:{value:e.project.name,callback:function(t){e.$set(e.project,"name",t)},expression:"project.name"}})],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs3:"","d-flex":""}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticStyle:{height:"100%"}},[a("v-text-field",{attrs:{label:"客户名",id:"testin",disabled:""},model:{value:e.project.publisherName,callback:function(t){e.$set(e.project,"publisherName",t)},expression:"project.publisherName"}})],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs3:"","d-flex":""}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticStyle:{height:"100%"}},[a("v-text-field",{attrs:{value:e.createTime1(e.project._id),label:"创建时间",disabled:""}})],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticStyle:{padding:"0px 16px"}},[a("span",{staticClass:"grey--text caption"},[e._v("共有 "+e._s(e.project.image?e.project.image.length||0:0)+" 个任务")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticStyle:{"min-width":"0px"},attrs:{flat:"",color:"grey"},on:{click:function(t){e.imageDialogOpen()}}},[a("v-icon",[e._v("add")])],1)],1)],1)],1),e._v(" "),(e.project.image?e.project.image.length||0:100)?a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.project.image,function(t,i){return a("v-flex",{key:t._id,attrs:{xs6:""}},[a("v-card",{attrs:{flat:""}},[a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs3:""}},[a("v-card-media",{attrs:{height:"131.5px"}},[a("upload",{attrs:{pid:e.project._id,image:t}})],1)],1),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("div",[a("div",{staticClass:"subheading",staticStyle:{display:"flex","align-items":"center"}},[e._v(e._s(t.style+"-"+t.designType+"-"+t.space+"-"+t.area+"-"+t.imageType+"视角-"+(i+1))+"\n                                                "),a("v-spacer"),e._v(" "),a("span",{staticClass:"grey--text caption"},[e._v(e._s(e.createTime1(t._id)))])],1),e._v(" "),a("v-divider",{staticStyle:{"margin-top":"12px","margin-bottom":"10px"}}),e._v(" "),1!==t.isSettlement?a("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[a("span",{},[e._v(e._s("价格：￥"+t.price+"，已收："))]),e._v(" "),a("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[e._v(e._s("￥"+t.payment))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"my-btn",attrs:{small:""},on:{click:function(a){e.modifyImageDialogPriceOpen(t)}}},[a("span",{staticClass:" caption"},[e._v("修改")])]),e._v(" "),a("v-btn",{staticClass:"my-btn",attrs:{small:""},on:{click:function(a){e.proPayDialogOpen(t)}}},[a("span",{staticClass:" caption"},[e._v("收款")])])],1):a("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[a("span",{staticClass:"green--text"},[e._v("已结算：")]),e._v(" "),a("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[e._v(e._s("￥"+t.payment))]),e._v(" "),a("v-spacer"),e._v(" "),a("span",[e._v(e._s(e.createTime2(t.settlementTime)))])],1),e._v(" "),1!==t.isFinish?a("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[e._v("\n                                                    "+e._s("状态：未完成")+"\n                                                    "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"my-btn",attrs:{small:""},on:{click:function(a){e.putProImageFinish(t)}}},[a("span",{staticClass:" caption"},[e._v("完成")])]),e._v(" "),a("v-btn",{staticClass:"my-btn",attrs:{small:""},on:{click:function(a){e.modifyImageDialogOpen(t)}}},[a("span",{staticClass:" caption"},[e._v("编辑")])]),e._v(" "),a("v-btn",{staticClass:"my-btn",attrs:{small:"",loading:e.appLoading},on:{click:function(a){e.deleteProImage(t._id)}}},[a("span",{staticClass:" caption"},[e._v("删除")])])],1):a("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[a("span",{staticClass:"green--text"},[e._v("状态：")]),e._v(" "),a("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[e._v("完成")]),e._v(" "),a("v-spacer"),e._v(" "),a("span",[e._v(e._s(e.createTime2(t.finishTime)))])],1)],1),e._v(" "),a("div",{staticClass:"grey--text  caption",staticStyle:{display:"flex","align-items":"center",height:"28px"}},[t.modelId?a("span",{staticClass:"green--text"},[e._v("建模：")]):a("span",[e._v("建模：")]),e._v(" "),t.modelId?a("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[e._v(e._s(""+t.modelName))]):a("span",[e._v("无")]),e._v(" "),a("v-spacer"),e._v(" "),1!==t.isFinish?a("v-btn",{staticClass:"my-btn",attrs:{small:""},on:{click:function(a){e.arrangeDialogOpen(t,"model")}}},[a("span",{staticClass:" caption"},[e._v("设置")])]):e._e(),e._v(" "),a("span",[e._v("，")]),e._v(" "),t.renderId?a("span",{staticClass:"green--text"},[e._v("渲染：")]):a("span",[e._v("渲染：")]),e._v(" "),t.renderId?a("span",{staticClass:"black--text",staticStyle:{"font-weight":"bold"}},[e._v(e._s(""+t.renderName))]):a("span",[e._v("无")]),e._v(" "),a("v-spacer"),e._v(" "),1!==t.isFinish?a("v-btn",{staticClass:"my-btn",attrs:{small:""},on:{click:function(a){e.arrangeDialogOpen(t,"render")}}},[a("span",{staticClass:" caption"},[e._v("设置")])]):e._e()],1)])],1)],1)],1)],1)}))],1):e._e(),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticStyle:{padding:"0px 16px",height:"48px"}},[a("span",{staticClass:"grey--text caption"},[e._v("参考文件")])])],1)],1),e._v(" "),a("v-flex",[a("file",{attrs:{pid:e.project._id,fileList:e.project.referenceFile},on:{close:function(t){e.uploadDialogClose()}}})],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:e.imageDialog,callback:function(t){e.imageDialog=t},expression:"imageDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title"},[e._v("添加任务")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"imageForm",staticStyle:{width:"100%"},attrs:{"lazy-validation":""},model:{value:e.imageValid,callback:function(t){e.imageValid=t},expression:"imageValid"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"设计风格",items:e.styleItems,color:"yellow darken-2",rules:e.rules.style},model:{value:e.image.style,callback:function(t){e.$set(e.image,"style",t)},expression:"image.style"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"设计类型",items:e.designTypeItems,color:"yellow darken-2",rules:e.rules.designType},on:{input:function(t){e.designTypeChange()}},model:{value:e.image.designType,callback:function(t){e.$set(e.image,"designType",t)},expression:"image.designType"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"设计空间",items:"工装"==e.image.designType?e.workDesignItems:e.homeDesignItems,rules:e.rules.space,color:"yellow darken-2"},model:{value:e.image.space,callback:function(t){e.$set(e.image,"space",t)},expression:"image.space"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"空间区域",items:"工装"==e.image.designType?e.workSpaceItems:e.homeSpaceItems,rules:e.rules.area,color:"yellow darken-2"},model:{value:e.image.area,callback:function(t){e.$set(e.image,"area",t)},expression:"image.area"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"图片类型",items:e.imageTypeItems,color:"yellow darken-2",rules:e.rules.imageType},model:{value:e.image.imageType,callback:function(t){e.$set(e.image,"imageType",t)},expression:"image.imageType"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"价格",color:"yellow darken-2",rules:e.rules.price},model:{value:e.image.price,callback:function(t){e.$set(e.image,"price",t)},expression:"image.price"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",color:"deep-orange"},on:{click:function(t){e.imageDialogClose()}}},[e._v("取消")]),e._v(" "),a("v-btn",{attrs:{color:"yellow",loading:this.$store.state.appLoading},on:{click:function(t){e.addImage(e.image)}}},[e._v("添加")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:e.modifyDialog,callback:function(t){e.modifyDialog=t},expression:"modifyDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title"},[e._v("修改任务")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"modifyImageForm",staticStyle:{width:"100%"},attrs:{"lazy-validation":""},model:{value:e.modifyValid,callback:function(t){e.modifyValid=t},expression:"modifyValid"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"设计风格",items:e.styleItems,color:"yellow darken-2",rules:e.rules.style},model:{value:e.modifyImage.style,callback:function(t){e.$set(e.modifyImage,"style",t)},expression:"modifyImage.style"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"设计类型",items:e.designTypeItems,color:"yellow darken-2",rules:e.rules.designType},on:{input:function(t){e.designTypeChange()}},model:{value:e.modifyImage.designType,callback:function(t){e.$set(e.modifyImage,"designType",t)},expression:"modifyImage.designType"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"设计空间",items:"工装"==e.modifyImage.designType?e.workDesignItems:e.homeDesignItems,rules:e.rules.space,color:"yellow darken-2"},model:{value:e.modifyImage.space,callback:function(t){e.$set(e.modifyImage,"space",t)},expression:"modifyImage.space"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"空间区域",items:"工装"==e.modifyImage.designType?e.workSpaceItems:e.homeSpaceItems,rules:e.rules.area,color:"yellow darken-2"},model:{value:e.modifyImage.area,callback:function(t){e.$set(e.modifyImage,"area",t)},expression:"modifyImage.area"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{label:"图片类型",items:e.imageTypeItems,color:"yellow darken-2",rules:e.rules.imageType},model:{value:e.modifyImage.imageType,callback:function(t){e.$set(e.modifyImage,"imageType",t)},expression:"modifyImage.imageType"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",color:"deep-orange"},on:{click:function(t){e.modifyImageDialogClose()}}},[e._v("取消")]),e._v(" "),a("v-btn",{attrs:{color:"yellow",loading:this.$store.state.appLoading},on:{click:function(t){e.putProImage()}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"400px"},model:{value:e.modifyDialogPrice,callback:function(t){e.modifyDialogPrice=t},expression:"modifyDialogPrice"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title"},[e._v("修改金额")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"modifyImageForm",staticStyle:{width:"100%"},attrs:{"lazy-validation":""},model:{value:e.modifyValid,callback:function(t){e.modifyValid=t},expression:"modifyValid"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"价格",color:"yellow darken-2",rules:e.rules.price},model:{value:e.modifyImage.price,callback:function(t){e.$set(e.modifyImage,"price",t)},expression:"modifyImage.price"}}),e._v(" "),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"手机号码"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",color:"deep-orange"},on:{click:function(t){e.modifyImageDialogPriceClose()}}},[e._v("取消")]),e._v(" "),a("v-btn",{attrs:{color:"yellow",loading:this.$store.state.appLoading},on:{click:function(t){e.putProImage()}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"350px"},model:{value:e.proPayDialog,callback:function(t){e.proPayDialog=t},expression:"proPayDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title text-xs-center",staticStyle:{width:"100%"}},[e._v("收款")])]),e._v(" "),a("v-divider"),e._v(" "),a("v-card-text",[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("payfilm",{attrs:{pid:e.project._id,image:e.proPayImage},on:{close:function(t){e.proPayDialogClose()}}})],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"350px"},model:{value:e.arrangeDialog,callback:function(t){e.arrangeDialog=t},expression:"arrangeDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title text-xs-center",staticStyle:{width:"100%"}},[e._v("工作安排")])]),e._v(" "),a("v-divider"),e._v(" "),a("v-card-text",[a("v-form",{ref:"arrangeForm",staticStyle:{width:"100%"},attrs:{"lazy-validation":""},model:{value:e.arrangeValid,callback:function(t){e.arrangeValid=t},expression:"arrangeValid"}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-autocomplete",{attrs:{items:e.customer.items,rules:[function(e){return!!e||"请选择渲染师"}],"search-input":e.search,"item-text":"name",label:"渲染师",placeholder:"输入"},on:{"update:searchInput":function(t){e.search=t}},model:{value:e.customer.select,callback:function(t){e.$set(e.customer,"select",t)},expression:"customer.select"}})],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",color:"deep-orange"},on:{click:function(t){e.arrangeDialogClose()}}},[e._v("取消")]),e._v(" "),a("v-btn",{attrs:{flat:"",loading:this.$store.state.appLoading},on:{click:function(t){e.putProImgArrange(e.workType)}}},[e._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]}},297:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"payfile"},[a("v-layout",{attrs:{wrap:""}},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"payfile",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"yFile"},on:{change:function(t){e.fileChange()}}}),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-form",{ref:"proPayForm",staticStyle:{width:"100%"},attrs:{"lazy-validation":""},model:{value:e.proPayValid,callback:function(t){e.proPayValid=t},expression:"proPayValid"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"金额",color:"yellow darken-2",rules:e.rules.price},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),e._v(" "),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"手机号码"}})],1)],1)],1)],1),e._v(" "),0===e.nowfile.state?a("v-flex",{attrs:{xs12:""}},[a("v-btn",{staticStyle:{height:"217px",width:"100%",padding:"0px",margin:"0px"},attrs:{depressed:""},on:{click:e.openFile}},[a("v-flex",{attrs:{xs12:""}},[a("div",{staticStyle:{margin:"8px",display:"flex","justify-content":"center","align-items":"center"}},[a("v-icon",{attrs:{color:"grey"}},[e._v("add")])],1),e._v(" "),a("div",{staticStyle:{margin:"8px",display:"flex","justify-content":"center","align-items":"center"}},[a("span",{staticClass:"grey--text caption"},[e._v("点击添加文件")])])])],1)],1):1===e.nowfile.state?a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-media",{attrs:{src:e.nowfile.src,height:"185px"}},[a("div",{staticStyle:{"background-color":"rgba(0, 0, 0, .7)",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[a("v-progress-circular",{attrs:{size:100,width:15,rotate:270,value:100*e.nowfile.progress,color:"yellow"}},[e._v("\n                                "+e._s(100*e.nowfile.progress)+"%\n                            ")]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"title white--text"},[e._v("\n                                "+e._s(e.nowfile.file.name.substring(e.nowfile.file.name.lastIndexOf(".")+1))+"\n                            ")])],1)]),e._v(" "),a("v-container",{staticStyle:{padding:"8px"},attrs:{"fill-height":"",fluid:""}},[a("v-layout",[a("v-flex",{staticStyle:{"padding-top":"8px","padding-bottom":"0px"},attrs:{xs10:"","align-end":"",flexbox:""}},[a("span",{staticClass:"lengthLimit"},[e._v(e._s(e.nowfile.file.name))])])],1)],1)],1)],1):a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-media",{attrs:{src:e.nowfile.src,height:"185px"}}),e._v(" "),a("v-container",{staticStyle:{padding:"8px"},attrs:{"fill-height":"",fluid:""}},[a("v-layout",[a("v-flex",{staticStyle:{"padding-top":"8px","padding-bottom":"0px"},attrs:{xs10:"","align-end":"",flexbox:""}},[a("span",{staticClass:"lengthLimit"},[e._v(e._s(e.voucher.name))])]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-layout",{attrs:{"justify-end":"","fill-height":""}},[a("v-menu",{attrs:{"offset-y":""}},[a("v-btn",{staticStyle:{margin:"0px","margin-top":"4px"},attrs:{slot:"activator",icon:"",small:"",light:"",dark:""},slot:"activator"},[a("v-icon",{attrs:{color:"grey darken-2"}},[e._v("more_vert")])],1),e._v(" "),a("v-list",[a("v-list-tile",{on:{click:e.openFile}},[a("v-list-tile-title",{staticClass:"body-1"},[e._v("重新上传")])],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),e.nowfile.validate?e._e():a("p",{staticClass:"subheading mb-0 red--text"},[e._v("请上传图片")]),e._v(" "),a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[a("v-btn",{attrs:{flat:"",color:"deep-orange"},on:{click:function(t){e.close()}}},[e._v("取消")]),e._v(" "),a("v-btn",{attrs:{flat:"",loading:this.$store.state.appLoading},on:{click:function(t){e.submit()}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=0.77f27c4cc156ae3c90fe.js.map