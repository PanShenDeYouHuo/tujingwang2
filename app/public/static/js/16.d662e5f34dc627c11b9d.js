webpackJsonp([16],{182:function(e,t,r){function n(e){r(259)}var a=r(25)(r(226),r(286),n,"data-v-5df081c6",null);e.exports=a.exports},226:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),a=r.n(n),s=r(10),o=r.n(s);t.default={name:"publish",props:[],data:function(){return{nproject:{dialog:!1,name:"",valid:!1,rules:[function(e){return!!e||"请填写任务名称"}]},customer:{loading:!1,items:[],select:null,idMap:[]},search:null}},watch:{search:function(e){var t=this;return o()(a.a.mark(function r(){var n,s,o;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:if(n=/[^\u4e00-\u9fa5]/,!n.test(e)){r.next=5;break}return r.abrupt("return");case 5:return r.next=7,t.$store.dispatch("getCustomers",{pageSize:50,currentPage:1,search:t.search});case 7:s=r.sent,t.customer.items=[],t.customer.idMap=[];for(o in s)t.customer.items.push(s[o].name),t.customer.idMap.push(s[o]._id);console.log(t.customer.idMap);case 12:case"end":return r.stop()}},r,t)}))()}},computed:{project:function(){return this.$store.state.project}},methods:{projectDialogOpen:function(){this.nproject.dialog=!0},projectDialogClose:function(){this.nproject.dialog=!1,this.$refs.mproForm.reset()},projectCreate:function(e,t){var r=this;return o()(a.a.mark(function n(){var s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r.$refs.mproForm.validate()){n.next=2;break}return n.abrupt("return");case 2:return s=r.customer.idMap[r.customer.items.indexOf(t)],n.next=5,r.$store.dispatch("postProject",{name:e,publisherId:s});case 5:r.projectDialogClose();case 6:case"end":return n.stop()}},n,r)}))()}},mounted:function(){},beforeCreate:function(){}}},237:function(e,t,r){t=e.exports=r(161)(!0),t.push([e.i,".publish[data-v-5df081c6]{padding-top:50px;display:-webkit-box;display:-ms-flexbox;display:flex}.mycard[data-v-5df081c6]{height:500px}","",{version:3,sources:["E:/program/tujingwang1/program/src/components/publish/index.vue"],names:[],mappings:"AACA,0BACI,iBAAkB,AAClB,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,yBACI,YAAc,CACjB",file:"index.vue",sourcesContent:["\n.publish[data-v-5df081c6] {\n    padding-top: 50px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.mycard[data-v-5df081c6] {\n    height: 500px;\n}\n\n\n\n\n\n\n"],sourceRoot:""}])},259:function(e,t,r){var n=r(237);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(162)("6e09a19d",n,!0,{})},286:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"publish"},[r("v-container",{attrs:{"grid-list-lg":"","text-xs-center":""}},[r("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-card",{staticStyle:{height:"300px",width:"300px"},attrs:{dark:""}},[r("v-btn",{staticStyle:{width:"100%",height:"100%",margin:"0px","font-size":"32px"},attrs:{flat:"",dark:""},on:{click:function(t){e.projectDialogOpen()}}},[r("i",{staticClass:"material-icons",staticStyle:{"font-size":"40px"}},[e._v("event_note")]),e._v("\n                                创建项目\n                            ")])],1)],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.nproject.dialog,callback:function(t){e.$set(e.nproject,"dialog",t)},expression:"nproject.dialog"}},[r("v-card",[r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-form",{ref:"mproForm",staticStyle:{width:"100%"},attrs:{"lazy-validation":""},model:{value:e.nproject.valid,callback:function(t){e.$set(e.nproject,"valid",t)},expression:"nproject.valid"}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"任务名称",rules:e.nproject.rules,color:"yellow darken-1"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.projectCreate(e.nproject.name)}},model:{value:e.nproject.name,callback:function(t){e.$set(e.nproject,"name",t)},expression:"nproject.name"}}),e._v(" "),r("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"任务名称"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-select",{attrs:{label:"客户名",autocomplete:"",loading:e.customer.loading,"cache-items":"",items:e.customer.items,rules:[function(e){return!!e||"请选择客户"}],"search-input":e.search},on:{"update:searchInput":function(t){e.search=t}},model:{value:e.customer.select,callback:function(t){e.$set(e.customer,"select",t)},expression:"customer.select"}})],1)],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{small:"",flat:""},on:{click:function(t){e.projectDialogClose()}}},[e._v("取消")]),e._v(" "),r("v-btn",{attrs:{small:"",flat:"",loading:this.$store.state.appLoading},on:{click:function(t){e.projectCreate(e.nproject.name,e.customer.select)}}},[e._v("创建")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=16.d662e5f34dc627c11b9d.js.map